/**
 * kattappa - A block based rich text editor with support of Images, embeds( Youtube, Instagram, Vine, Vimeo etc)
 * @author vBrijesh Bittu <brijeshb42@gmail.com>
 * @version v0.3.8
 * @link https://github.com/brijeshb42/kattappa
 * @license MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Kattappa=e()}}(function(){var e;return function t(e,n,o){function r(a,u){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=d["default"].parse(e);return t.hostname}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},c="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,f=r(c),p=e("url"),d=r(p),h=e("../utils"),y=e("../utils/keys"),v=r(y),b=e("./embeds"),m={Name:"embed",Icon:"",Empty:function(){return""},Description:"Embed",isEmpty:function(e){return""===e},EmbedTypes:b},g=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={loaded:!1,domain:"",url:""},this.checkUrls=this.checkUrls.bind(this),this.handleUrl=this.handleUrl.bind(this),this.checkContent=this.checkContent.bind(this),this.renderBlock=this.renderBlock.bind(this)}return a(t,e),l(t,[{key:"checkUrls",value:function(e,t){if(e.indexOf("http")<0&&(e="http://"+e),h.UrlRegex.test(e)){var n=u(e),o=this.props.EmbedTypes;for(var r in o)if(n.indexOf(r)>-1)return void this.setState({loaded:!0,domain:r,url:e});alert("This URL is not supported."),this.refs.getDOMNode().value=""}else t||alert("Enter a valid url");h.UrlRegex.lastIndex=0}},{key:"handleUrl",value:function(e){e.keyCode===v["default"].ENTER&&this.checkUrls(e.target.value,!1)}},{key:"componentDidMount",value:function(){this.refs.input.getDOMNode().focus(),this.checkUrls(this.props.content,!0)}},{key:"checkContent",value:function(e){e&&this.props.onContentChanged?this.props.onContentChanged(this.props.position,this.state.url):this.props.content===this.state.url}},{key:"renderBlock",value:function(){var e=this.props.EmbedTypes;return f["default"].createElement(e[this.state.domain],{url:this.state.url,checkContent:this.checkContent})}},{key:"render",value:function(){return this.state.loaded?f["default"].createElement("div",{className:"katap-block"},this.renderBlock()):f["default"].createElement("div",{className:"katap-block katap-embed"},f["default"].createElement("p",null,"Supported embeds: ",Object.keys(this.props.EmbedTypes).join(", ")),f["default"].createElement("input",{ref:"input",type:"text",placeholder:"Enter URL and press enter",onKeyUp:this.handleUrl}))}}]),t}(f["default"].Component);g.defaultProps={EmbedTypes:b},m.React=g,n["default"]=m,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils":24,"../utils/keys":25,"./embeds":3,url:30}],2:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},l="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,s=o(l),c=function(e){function t(e){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={message:"Wait",id:"",valid:!1},this.validate=this.validate.bind(this),this.extraHandler=this.extraHandler.bind(this)}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.validate(),this.extraHandler()}},{key:"extraHandler",value:function(){}},{key:"validate",value:function(){var e;return e=this.props.regex.exec(this.props.url),this.props.regex.lastIndex=0,e?(this.setState({message:"OK.",id:e[1],valid:!0}),void this.props.checkContent(!0)):(this.props.checkContent(!1),void this.setState({message:"error."}))}},{key:"render",value:function(){return s["default"].createElement("div",{"class":"katap-embed"})}}]),t}(s["default"].Component);c.defaultProps={url:"",regex:/^$/},n["default"]=c,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=e("./youtube"),i=o(r),a=e("./vimeo"),u=o(a),l=e("./vine"),s=o(l),c=e("./instagram"),f=o(c);t.exports={youtube:i["default"],instagram:f["default"],vimeo:u["default"],vine:s["default"]}},{"./instagram":4,"./vimeo":5,"./vine":6,"./youtube":7}],4:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("./base"),p=r(f),d=function(e){function t(){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return this.state.valid?c["default"].createElement("div",{className:"katap-embed katap-instagram"},c["default"].createElement("iframe",{src:"//instagram.com/p/"+this.state.id+"/embed",frameBorder:0,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed"},"Invalid Instagram URL.")}}]),t}(p["default"]);d.defaultProps={url:"",regex:/https?:\/\/instagram\.com\/p\/([^\/]+)\/?.*/gi},n["default"]=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":2}],5:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("./base"),p=r(f),d=function(e){function t(){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return this.state.valid?c["default"].createElement("div",{className:"katap-embed katap-vimeo"},c["default"].createElement("iframe",{src:"//player.vimeo.com/video/"+this.state.id,frameBorder:0,width:580,height:320,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed"},"Invalid Vimeo URL.")}}]),t}(p["default"]);d.defaultProps={url:"",regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/},n["default"]=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":2}],6:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("./base"),p=r(f),d=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.loadExternalScript=this.loadExternalScript.bind(this)}return a(t,e),u(t,[{key:"loadExternalScript",value:function(){if("undefined"!=typeof window){var e=this.props.scriptUrl,t=document.createElement("script");t.src=e,t.async=1,window.document.body.appendChild(t)}}},{key:"extraHandler",value:function(){this.loadExternalScript()}},{key:"render",value:function(){return this.state.valid?c["default"].createElement("div",{className:"katap-embed katap-vimeo"},c["default"].createElement("iframe",{className:"vine-embed",src:"//vine.co/v/"+this.state.id+"/embed/simple",frameBorder:0,width:600,height:600,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed"},"Invalid Vimeo URL.")}}]),t}(p["default"]);d.defaultProps={regex:/https?:\/\/vine\.co\/v\/([a-zA-Z0-9].*)\/?/,scriptUrl:"//platform.vine.co/static/scripts/embed.js"},n["default"]=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":2}],7:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("./base"),p=r(f),d=function(e){function t(){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return this.state.valid?c["default"].createElement("div",{className:"katap-embed katap-youtube"},c["default"].createElement("iframe",{src:"//youtube.com/embed/"+this.state.id,frameBorder:0,width:580,height:320,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed"},"Invalid Youtube URL.")}}]),t}(p["default"]);d.defaultProps={url:"",regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/},n["default"]=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":2}],8:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("../components/quill"),p=r(f),d=e("./text"),h=r(d),y=function(e){function t(){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement("h2",{className:"katap-block katap-h2"},c["default"].createElement(p["default"],{showToolbar:!1,formats:[],content:this.props.content,captureReturn:this.captureReturn,onContentChanged:this.onContentChanged}))}}]),t}(h["default"].React),v={Name:"h2",React:y,Icon:"",Empty:function(){return""},Description:"Heading 2",isEmpty:function(e){return""===e.replace(/(<([^>]+)>)/gi,"")}};n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/quill":19,"./text":14}],9:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},l="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,s=o(l),c=function(e){function t(){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"render",value:function(){return s["default"].createElement("hr",{className:"katap-block katap-hr"})}}]),t}(s["default"].Component),f={Name:"hr",React:c,Icon:"",Empty:function(){return""},Description:"Break",isEmpty:function(e){return!0}};n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("../components/droppable"),p=r(f),d=e("../utils/keys"),h=r(d),y=e("../utils");"undefined"!=typeof window?window.fetch:"undefined"!=typeof o?o.fetch:null;var v=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleImage=this.handleImage.bind(this),this.changeSubtext=this.changeSubtext.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.content;e&&""!==e.url||c["default"].findDOMNode(this.refs.img).focus()}},{key:"handleImage",value:function(e){var t=this.props.UploadUrl,n=this,o=e[0];if(0!==o.type.indexOf("image/"))return void alert("Provide a valid image file.");var r={};if(r.subtext=this.props.content.subtext,""!==t){var i=new FormData;i.append("image",o),fetch(t,{method:"POST",credentials:"same-origin",body:i}).then(function(e){if(e.status>=200&&e.status<300)return e.json();var t=new Error(e.statusText);throw t.response=e,t}).then(function(e){e.type&&"success"===e.type?n.props.onContentChanged&&(r.url=e.message,n.props.onContentChanged(n.props.position,r)):alert("Could not upload.")})["catch"](function(e){console.error(e),alert("Error while uploading. Retry.")})}else this.props.onContentChanged&&(r.url=o.preview,this.props.onContentChanged(this.props.position,r))}},{key:"changeSubtext",value:function(e){if(this.props.onContentChanged){var t={url:this.props.content.url,subtext:e.target.value};this.props.onContentChanged(this.props.position,t)}}},{key:"handleKeyPress",value:function(e){if(e.which===h["default"].ENTER){if(y.UrlRegex.test(e.target.value)){var t={};t.subtext=this.props.content.subtext,t.url=e.target.value,this.props.onContentChanged&&this.props.onContentChanged(this.props.position,t)}else alert("Enter a valid URL.");y.UrlRegex.lastIndex=0}}},{key:"render",value:function(){var e=this.props.content;return e&&""!==e.url?c["default"].createElement("div",{className:"katap-block katap-image"},c["default"].createElement("img",{src:e.url}),c["default"].createElement("input",{type:"text",className:"katap-image-subtext",placeholder:"Image subtext",onChange:this.changeSubtext,value:e.subtext})):c["default"].createElement("div",{className:"katap-block katap-image"},c["default"].createElement("input",{ref:"img",type:"text",placeholder:"Paste URL of image and press enter",onKeyDown:this.handleKeyPress}),c["default"].createElement(p["default"],{onDrop:this.handleImage},c["default"].createElement("p",null,this.props.message)))}}]),t}(c["default"].Component);v.defaultProps={UploadUrl:"",message:"Or Drop image here or click to add."};var b={Name:"image",React:v,Icon:"",Empty:function(){return{url:"",subtext:""}},Description:"Image",isEmpty:function(e){return""===e.url}};n["default"]=b,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/droppable":17,"../utils":24,"../utils/keys":25}],11:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=e("./embed"),i=o(r),a=e("./h2"),u=o(a),l=e("./hr"),s=o(l),c=e("./image"),f=o(c),p=e("./ol"),d=o(p),h=e("./quote"),y=o(h),v=e("./text"),b=o(v),m=e("./ul"),g=o(m);t.exports={text:b["default"],image:f["default"],embed:i["default"],h2:u["default"],hr:s["default"],quote:y["default"],ol:d["default"],ul:g["default"]}},{"./embed":1,"./h2":8,"./hr":9,"./image":10,"./ol":12,"./quote":13,"./text":14,"./ul":15}],12:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("../utils/action"),p=(r(f),e("../components/listitem")),d=r(p),h=e("../components/blockcontrol"),y=r(h),v=e("../utils"),b=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onContentChanged=this.onContentChanged.bind(this),this.addItem=this.addItem.bind(this),this.handleItemRemove=this.handleItemRemove.bind(this),this.renderListItem=this.renderListItem.bind(this)}return a(t,e),u(t,[{key:"onContentChanged",value:function(e,t){this.props.content[e].content=t,this.props.onContentChanged&&this.props.onContentChanged(this.props.position,this.props.content)}},{key:"addItem",value:function(e){if(!(0>e||e>=this.props.content.length)){var t=this.props.content;t.push({content:"",key:v.uuid()}),this.props.onContentChanged&&this.props.onContentChanged(this.props.position,t)}}},{key:"handleItemRemove",value:function(e,t){if(!(this.props.content.length<2)){var n=this.props.content;n.splice(t,1),this.props.onContentChanged&&this.props.onContentChanged(this.props.position,n)}}},{key:"renderListItem",value:function(){var e=this,t=[];return this.props.content.map(function(n,o){t.push(c["default"].createElement("li",{key:n.key},c["default"].createElement(y["default"],{onlyRemove:!0,blockAction:e.handleItemRemove,position:o,length:e.props.content.length}),c["default"].createElement(d["default"],{position:o,content:n.content,addItem:e.addItem,onContentChanged:e.onContentChanged})))}),t}},{key:"render",value:function(){return c["default"].createElement("ol",{className:"katap-block katap-list"},this.renderListItem())}}]),t}(c["default"].Component),m={Name:"ol",React:b,Icon:"",Empty:function(){return[{content:"",key:v.uuid()}]},Description:"Ordered List",isEmpty:function(e){for(var t=0;t<e.length;t++)if(""!==e[t].content.replace(/(<([^>]+)>)/gi,""))return!1;return!0}};b.defaultProps={content:m.Empty()},n["default"]=m,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/blockcontrol":16,"../components/listitem":18,"../utils":24,"../utils/action":23}],13:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("../components/quill"),p=r(f),d=e("./text"),h=r(d),y=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onContentChanged=this.onContentChanged.bind(this),this.onCreditChange=this.onCreditChange.bind(this)}return a(t,e),u(t,[{key:"onContentChanged",value:function(e){var e={content:e,credit:this.props.content.credit};this.props.onContentChanged&&this.props.onContentChanged(this.props.position,e)}},{key:"onCreditChange",value:function(e){var t={content:this.props.content.content,credit:e.target.value};this.props.onContentChanged&&this.props.onContentChanged(this.props.position,t)}},{key:"render",value:function(){return c["default"].createElement("blockquote",{className:"katap-block katap-text"},c["default"].createElement(p["default"],{showToolbar:!0,content:this.props.content.content,captureReturn:this.captureReturn,onContentChanged:this.onContentChanged}),c["default"].createElement("input",{className:"katap-blockquote-credit",type:"text",placeholder:"Credit",onChange:this.onCreditChange,value:this.props.content.credit}))}}]),t}(h["default"].React),v={Name:"quote",React:y,Icon:"",Empty:function(){return{content:"",credit:""}},Description:"Block Quote",isEmpty:function(e){return""===e.content.replace(/(<([^>]+)>)/gi,"")}};y.defaultProps={content:v.Empty()},n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/quill":19,"./text":14}],14:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("../components/quill"),p=r(f),d=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.captureReturn=this.captureReturn.bind(this),this.onContentChanged=this.onContentChanged.bind(this)}return a(t,e),u(t,[{key:"captureReturn",value:function(){this.props.addBlock("text",this.props.position)}},{key:"onContentChanged",value:function(e){this.props.onContentChanged&&this.props.onContentChanged(this.props.position,e)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"katap-block katap-text"},c["default"].createElement(p["default"],{content:this.props.content,onContentChanged:this.onContentChanged}))}}]),t}(c["default"].Component),h={Name:"text",React:d,Icon:"",Empty:function(){return""},Description:"Text",isEmpty:function(e){return""===e.replace(/(<([^>]+)>)/gi,"")}};n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/quill":19}],15:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);

e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("./ol"),p=r(f),d=e("../utils"),h=function(e){function t(){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement("ul",{className:"katap-block katap-list"},this.renderListItem())}}]),t}(p["default"].React),y={Name:"ul",React:h,Icon:"",Empty:function(){return[{content:"",key:d.uuid()}]},Description:"Unordered List",isEmpty:function(e){for(var t=0;t<e.length;t++)if(""!==e[t].content.replace(/(<([^>]+)>)/gi,""))return!1;return!0}};h.defaultProps={content:y.Empty()},n["default"]=y,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils":24,"./ol":12}],16:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("../utils/action"),p=r(f),d=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.getToolbar=this.getToolbar.bind(this)}return a(t,e),u(t,[{key:"handleClick",value:function(e){var t=Array.prototype.slice.call(e.currentTarget.children),n=t.indexOf(e.target);if(!(0>n)){var o=t[n].getAttribute("data-action");this.props.blockAction(o,this.props.position)}}},{key:"getToolbar",value:function(e){if(this.props.onlyRemove)return c["default"].createElement("div",{className:"katap-control-toolbar",onClick:this.handleClick},c["default"].createElement("button",{title:"Remove","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×"));var t=[];return 0===e&&this.props.length<2?t.push(c["default"].createElement("button",{title:"Remove","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")):0===e?(t.push(c["default"].createElement("button",{title:"Remove","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")),t.push(c["default"].createElement("button",{title:"Move Down","data-action":p["default"].DOWN,key:p["default"].DOWN},"↓"))):e===this.props.length-1?(t.push(c["default"].createElement("button",{title:"Remove","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")),t.push(c["default"].createElement("button",{title:"Move Up","data-action":p["default"].UP,key:p["default"].UP},"↑"))):(t.push(c["default"].createElement("button",{title:"Remove","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")),t.push(c["default"].createElement("button",{title:"Move Up","data-action":p["default"].UP,key:p["default"].UP},"↑")),t.push(c["default"].createElement("button",{title:"Move Down","data-action":p["default"].DOWN,key:p["default"].DOWN},"↓"))),c["default"].createElement("div",{className:"katap-control-toolbar",onClick:this.handleClick},t)}},{key:"render",value:function(){return this.getToolbar(this.props.position)}}]),t}(c["default"].Component);d.defaultProps={onlyRemove:!1},n["default"]=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/action":23}],17:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},l="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,s=o(l),c=function(e){function t(e){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={className:""},this.getClassName=this.getClassName.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onClick=this.onClick.bind(this),this.onDrop=this.onDrop.bind(this)}return i(t,e),a(t,[{key:"getClassName",value:function(){return"katap-droppable "+(this.props.className||this.state.className)}},{key:"componentDidMount",value:function(){this.refs.droppable.getDOMNode().focus()}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy";var t=e.dataTransfer.effectAllowed;("all"===t||"uninitialized"===t)&&this.setState({className:"katap-drop-active"}),this.props.onDragOver&&this.props.onDragOver(e)}},{key:"onDragLeave",value:function(e){this.setState({className:""}),this.props.onDragLeave&&this.props.onDragLeave(e)}},{key:"onClick",value:function(){var e=s["default"].findDOMNode(this.refs.input);e.value=null,e.click()}},{key:"onDrop",value:function(e){e.preventDefault();var t;e.dataTransfer?t=e.dataTransfer.files:e.target&&(t=e.target.files);for(var n=this.props.multiple?t.length:1,o=0;n>o;o++)t[o].preview=URL.createObjectURL(t[o]);this.props.onDrop&&(t=Array.prototype.slice.call(t,0,n),this.props.onDrop(t))}},{key:"render",value:function(){return s["default"].createElement("div",{ref:"droppable",style:{height:100},className:this.getClassName(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onClick:this.onClick,onDrop:this.onDrop},s["default"].createElement("input",{ref:"input",type:"file",style:{display:"none"},multiple:this.props.multiple,onChange:this.onDrop}),this.props.children)}}]),t}(s["default"].Component);c.defaultProps={supportClick:!0,multiple:!1},n["default"]=c,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("./quill"),p=r(f),d=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.captureReturn=this.captureReturn.bind(this),this.onContentChanged=this.onContentChanged.bind(this)}return a(t,e),u(t,[{key:"captureReturn",value:function(){this.props.addItem&&this.props.addItem(this.props.position)}},{key:"onContentChanged",value:function(e){this.props.onContentChanged&&this.props.onContentChanged(this.props.position,e)}},{key:"render",value:function(){return c["default"].createElement(p["default"],{content:this.props.content,captureReturn:this.captureReturn,enterCapture:!0,onContentChanged:this.onContentChanged})}}]),t}(c["default"].Component);n["default"]=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./quill":19}],19:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},l="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,s=o(l),c="undefined"!=typeof window?window.Quill:"undefined"!=typeof e?e.Quill:null,f=o(c),p="<div><br></div>",d=[{label:"Text",type:"group",items:[{type:"bold",label:"Bold"},{type:"italic",label:"Italic"},{type:"underline",label:"Underline"},{type:"link",label:"Link"},{type:"strike",label:"Strike"}]}],h=[];d[0].items.forEach(function(e,t){h.push(e.type)});var y=function(e){function t(e){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={showToolbar:!0},this.enterPressed=this.enterPressed.bind(this),this.createEditor=this.createEditor.bind(this),this.hookEditor=this.hookEditor.bind(this),this.focus=this.focus.bind(this),this.onEditorChange=this.onEditorChange.bind(this),this.captureReturn=this.captureReturn.bind(this),this.getEditorContents=this.getEditorContents.bind(this),this.setEditorContents=this.setEditorContents.bind(this),this.isControlled=this.isControlled.bind(this),this.getEditorConfig=this.getEditorConfig.bind(this),this.getEditorElement=this.getEditorElement.bind(this),this.renderItems=this.renderItems.bind(this),this.renderGroups=this.renderGroups.bind(this)}return i(t,e),a(t,[{key:"enterPressed",value:function(){this.props.enterPressed&&this.props.enterPressed()}},{key:"createEditor",value:function(e,t){var n=new f["default"](e,t);return this.hookEditor(n),n}},{key:"hookEditor",value:function(e){e.on("text-change",function(t,n){this.onEditorChange&&this.onEditorChange(e.getHTML(),t,n)}.bind(this)),e.on("selection-change",function(e,t){this.onEditorChangeSelection&&this.onEditorChangeSelection(e,t)}.bind(this)),this.props.enterCapture&&e.addModule("enterHandler",{keydown:this.captureReturn}),this.setEditorContents(e,this.props.content)}},{key:"focus",value:function(){this.state.editor.focus()}},{key:"onEditorChange",value:function(e,t,n){if(this.props.enterCapture){var o=this.state.editor;e.indexOf(p)>0&&(e=e.replace(p,""),o.setHTML(e),o.setSelection(o.getLength(),o.getLength()))}this.props.onContentChanged&&this.props.onContentChanged(e)}},{key:"captureReturn",value:function(){this.props.captureReturn&&this.props.captureReturn()}},{key:"getEditorContents",value:function(){return this.state.content}},{key:"setEditorContents",value:function(e,t){var n=e.getSelection();e.setHTML(t),n&&this.setEditorSelection(e,n)}},{key:"isControlled",value:function(){return"value"in this.props}},{key:"getEditorConfig",value:function(){var e=this.props.formats,t={theme:this.props.theme,modules:this.props.modules,pollInterval:this.props.pollInterval,formats:e};return t.modules.toolbar||(t.modules=JSON.parse(JSON.stringify(t.modules)),t.modules.toolbar={container:this.refs.toolbar.getDOMNode()}),t}},{key:"getEditorElement",value:function(){return this.refs.editor.getDOMNode()}},{key:"componentDidMount",value:function(){var e=this.createEditor(this.getEditorElement(),this.getEditorConfig());this.setState(this.props.showToolbar?{showToolbar:this.props.showToolbar,editor:e}:{editor:e}),e.focus(),e.setHTML(this.props.content)}},{key:"renderItems",value:function(e,t){return s["default"].createElement("span",{className:"ql-format-button ql-"+e.type,title:e.label,key:t})}},{key:"renderGroups",value:function(){var e=this,t=this.props.items||d,n=t.map(function(t,n){return s["default"].createElement("span",{className:"ql-format-"+t.type,key:n},t.items.map(e.renderItems))});return n}},{key:"render",value:function(){var e=this.state.showToolbar?"visible":"hidden",t=this;return s["default"].createElement("div",{className:"quill-rte"},s["default"].createElement("div",{ref:"toolbar",className:"ql-toolbar ql-snow",style:{visibility:e}},t.renderGroups()),s["default"].createElement("div",{className:"ql-container ql-snow",ref:"editor"}))}}]),t}(s["default"].Component);y.defaultProps={className:"ql-editor",theme:"base",modules:{"link-tooltip":!0},content:"",items:d,formats:h,enterCapture:!1},n["default"]=y,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("../utils/action"),p=(r(f),e("../blocks/")),d=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={visible:!1,types:Object.keys(p)},this.toggleState=this.toggleState.bind(this),this.addBlock=this.addBlock.bind(this)}return a(t,e),u(t,[{key:"toggleState",value:function(e){var t=Array.prototype.slice.call(e.currentTarget.children),n=t.indexOf(e.target);0>n||(this.setState({visible:!this.state.visible}),this.state.visible&&0!==n&&this.props.addBlock(t[n].getAttribute("title"),this.props.position))}},{key:"addBlock",value:function(e,t){this.props.addBlock()}},{key:"render",value:function(){var e=this.props.availableBlocks;return this.state.visible?c["default"].createElement("div",{className:"katap-toolbar",onClick:this.toggleState},c["default"].createElement("button",{title:"Close"},"×"),this.state.types.map(function(t,n){return c["default"].createElement("button",{title:t,key:n},e[t].Description)})):c["default"].createElement("div",{className:"katap-toolbar",onClick:this.toggleState},c["default"].createElement("button",{title:"Add block"},"+"))}}]),t}(c["default"].Component);d.defaultProps={availableBlocks:p},n["default"]=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../blocks/":11,"../utils/action":23}],21:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;u=s=l=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,t=i,n=a,o=!0}},s="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,c=r(s),f=e("./utils/action"),p=r(f),d=e("./components/blockcontrol"),h=r(d),y=e("./components/toolbar"),v=r(y),b=e("./utils"),m=e("./blocks"),g=e("./blocks/embeds"),w=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={blocks:[]},this.handleBlockAction=this.handleBlockAction.bind(this),this.getBlocks=this.getBlocks.bind(this),this.addBlock=this.addBlock.bind(this),this.contentChange=this.contentChange.bind(this),this.getToolbar=this.getToolbar.bind(this),this.renderBlocks=this.renderBlocks.bind(this),this.refreshBlocks=this.refreshBlocks.bind(this)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.refreshBlocks()}},{key:"refreshBlocks",value:function(){this.setState({blocks:this.props.getBlocks()})}},{key:"handleBlockAction",value:function(e,t){var n=this.state.blocks,o=this.props.availableBlocks;if(e===p["default"].REMOVE){if(!o[n[t].type].isEmpty(n[t].data)&&!confirm("Sure?"))return;n.splice(t,1)}else e===p["default"].UP?n.splice(t-1,2,n[t],n[t-1]):e===p["default"].DOWN&&n.splice(t,2,n[t+1],n[t]);this.setState({blocks:n})}},{key:"getBlocks",value:function(){return this.state.blocks?this.state.blocks:(this.setState({blocks:this.props.getBlocks()}),this.props.getBlocks())}},{key:"addBlock",value:function(e,t){if(!(0>t||t>this.state.blocks.length)){var n={type:e,data:m[e].Empty(),key:b.uuid()},o=this.state.blocks;o.splice(t+1,0,n),this.setState({blocks:o})}}},{key:"contentChange",value:function(e,t){var n=this.state.blocks;n[e].data=t,this.setState({blocks:n})}},{key:"getToolbar",value:function(e){return c["default"].createElement(h["default"],{blockAction:this.handleBlockAction,position:e,length:this.state.blocks.length})}},{key:"renderBlocks",value:function(){var e=this,t=this.props.blocks||this.state.blocks,n=this.props.availableBlocks;if(t.length<1)return c["default"].createElement(v["default"],{position:0,addBlock:this.addBlock,availableBlocks:n});var o=t.map(function(t,o){var r=n[t.type].React;return c["default"].createElement("div",{key:t.key,className:"katap-container"},e.getToolbar(o),c["default"].createElement(r,{ref:"block"+o,position:o,content:t.data,addBlock:e.addBlock,onContentChanged:e.contentChange,UploadUrl:e.props.UploadUrl,EmbedTypes:e.props.EmbedTypes}),c["default"].createElement(v["default"],{position:o,addBlock:e.addBlock}))});return o}},{key:"render",value:function(){return this.state.blocks.length>0?c["default"].createElement("div",{className:"katap-listing"},this.renderBlocks()):c["default"].createElement("div",{className:"katap-listing"},this.renderBlocks())}}]),t}(c["default"].Component);w.defaultProps={availableBlocks:m,EmbedTypes:g,getBlocks:function(){return[]},UploadUrl:""},n["default"]=w,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./blocks":11,"./blocks/embeds":3,"./components/blockcontrol":16,"./components/toolbar":20,"./utils":24,"./utils/action":23}],22:[function(e,t,n){(function(n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r="undefined"!=typeof window?window.Quill:"undefined"!=typeof n?n.Quill:null,i=o(r),a=e("./utils/action"),u=(o(a),e("./utils/keys")),l=(o(u),e("./utils")),s=e("./editor"),c=o(s),f=e("./blocks"),p=o(f),d=e("./blocks/embeds/base"),h=o(d),y=function(e,t){this.quill=e,this.options=t;var n=i["default"].require("dom").KEYS.ENTER;t&&t.keyup&&"function"==typeof t.keyup&&e.editor.root.addEventListener("keyup",function(e){e.keyCode===n&&(e.preventDefault(),e.stopPropagation(),t.keyup.call(null,e))}),t&&t.keydown&&"function"==typeof t.keydown&&e.editor.root.addEventListener("keydown",function(e){e.keyCode===n&&(e.preventDefault(),e.stopPropagation(),t.keydown.call(null,e))})};i["default"].registerModule("enterHandler",y),t.exports={Editor:c["default"],Blocks:p["default"],uuid:l.uuid,BaseEmbed:h["default"]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./blocks":11,"./blocks/embeds/base":2,"./editor":21,"./utils":24,"./utils/action":23,"./utils/keys":25}],23:[function(e,t,n){"use strict";t.exports={UP:"up",DOWN:"down",REMOVE:"remove"}},{}],24:[function(e,t,n){"use strict";t.exports={uuid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+"-"+e()},UrlRegex:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i}},{}],25:[function(e,t,n){"use strict";t.exports={ENTER:13,ESC:27,BACKSPACE:8}},{}],26:[function(t,n,o){(function(t){!function(r){function i(e){throw RangeError(S[e])}function a(e,t){for(var n=e.length,o=[];n--;)o[n]=t(e[n]);return o}function u(e,t){var n=e.split("@"),o="";n.length>1&&(o=n[0]+"@",e=n[1]),e=e.replace(N,".");var r=e.split("."),i=a(r,t).join(".");return o+i}function l(e){for(var t,n,o=[],r=0,i=e.length;i>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&i>r?(n=e.charCodeAt(r++),56320==(64512&n)?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),r--)):o.push(t);return o}function s(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function f(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,n){var o=0;for(e=n?U(e/_):e>>1,e+=U(e/t);e>I*j>>1;o+=E)e=U(e/I);return U(o+(I+1)*e/(e+P))}function d(e){var t,n,o,r,a,u,l,f,d,h,y=[],v=e.length,b=0,m=R,g=x;for(n=e.lastIndexOf(T),0>n&&(n=0),o=0;n>o;++o)e.charCodeAt(o)>=128&&i("not-basic"),y.push(e.charCodeAt(o));for(r=n>0?n+1:0;v>r;){for(a=b,u=1,l=E;r>=v&&i("invalid-input"),f=c(e.charCodeAt(r++)),(f>=E||f>U((k-b)/u))&&i("overflow"),b+=f*u,d=g>=l?C:l>=g+j?j:l-g,!(d>f);l+=E)h=E-d,u>U(k/h)&&i("overflow"),u*=h;t=y.length+1,g=p(b-a,t,0==a),U(b/t)>k-m&&i("overflow"),m+=U(b/t),b%=t,y.splice(b++,0,m)}return s(y)}function h(e){var t,n,o,r,a,u,s,c,d,h,y,v,b,m,g,w=[];for(e=l(e),v=e.length,t=R,n=0,a=x,u=0;v>u;++u)y=e[u],128>y&&w.push(B(y));for(o=r=w.length,r&&w.push(T);v>o;){for(s=k,u=0;v>u;++u)y=e[u],y>=t&&s>y&&(s=y);for(b=o+1,s-t>U((k-n)/b)&&i("overflow"),n+=(s-t)*b,t=s,u=0;v>u;++u)if(y=e[u],t>y&&++n>k&&i("overflow"),y==t){for(c=n,d=E;h=a>=d?C:d>=a+j?j:d-a,!(h>c);d+=E)g=c-h,m=E-h,w.push(B(f(h+g%m,0))),c=U(g/m);w.push(B(f(c,0))),a=p(n,b,o==r),n=0,++o}++n,++t}return w.join("")}function y(e){return u(e,function(e){return D.test(e)?d(e.slice(4).toLowerCase()):e})}function v(e){return u(e,function(e){return M.test(e)?"xn--"+h(e):e})}var b="object"==typeof o&&o&&!o.nodeType&&o,m="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof t&&t;(g.global===g||g.window===g||g.self===g)&&(r=g);var w,O,k=2147483647,E=36,C=1,j=26,P=38,_=700,x=72,R=128,T="-",D=/^xn--/,M=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=E-C,U=Math.floor,B=String.fromCharCode;if(w={version:"1.3.2",ucs2:{decode:l,encode:s},decode:d,encode:h,toASCII:v,toUnicode:y},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(b&&m)if(n.exports==b)m.exports=w;else for(O in w)w.hasOwnProperty(O)&&(b[O]=w[O]);else r.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t,n){"use strict";function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var u=/\+/g;e=e.split(t);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var s=e.length;l>0&&s>l&&(s=l);for(var c=0;s>c;++c){var f,p,d,h,y=e[c].replace(u,"%20"),v=y.indexOf(n);v>=0?(f=y.substr(0,v),p=y.substr(v+1)):(f=y,p=""),d=decodeURIComponent(f),h=decodeURIComponent(p),o(a,d)?r(a[d])?a[d].push(h):a[d]=[a[d],h]:a[d]=h}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],28:[function(e,t,n){"use strict";function o(e,t){if(e.map)return e.map(t);for(var n=[],o=0;o<e.length;o++)n.push(t(e[o],o));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,u){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),function(a){var u=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],function(e){return u+encodeURIComponent(r(e))}).join(t):u+encodeURIComponent(r(e[a]))}).join(t):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],29:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":27,"./encode":28}],30:[function(e,t,n){function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,n){if(e&&s(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}function i(e){return l(e)&&(e=r(e)),e instanceof o?e.format():o.prototype.format.call(e)}function a(e,t){return r(e,!1,!0).resolve(t)}function u(e,t){return e?r(e,!1,!0).resolveObject(t):t}function l(e){return"string"==typeof e}function s(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function f(e){return null==e}var p=e("punycode");n.parse=r,n.resolve=a,n.resolveObject=u,n.format=i,n.Url=o;var d=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,y=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(y),b=["'"].concat(v),m=["%","/","?",";","#"].concat(b),g=["/","?","#"],w=255,O=/^[a-z0-9A-Z_-]{0,63}$/,k=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},C={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},P=e("querystring");o.prototype.parse=function(e,t,n){if(!l(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e;o=o.trim();var r=d.exec(o);if(r){r=r[0];var i=r.toLowerCase();this.protocol=i,o=o.substr(r.length)}if(n||r||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===o.substr(0,2);!a||r&&C[r]||(o=o.substr(2),this.slashes=!0)}if(!C[r]&&(a||r&&!j[r])){for(var u=-1,s=0;s<g.length;s++){var c=o.indexOf(g[s]);-1!==c&&(-1===u||u>c)&&(u=c)}var f,h;h=-1===u?o.lastIndexOf("@"):o.lastIndexOf("@",u),-1!==h&&(f=o.slice(0,h),o=o.slice(h+1),this.auth=decodeURIComponent(f)),u=-1;for(var s=0;s<m.length;s++){var c=o.indexOf(m[s]);-1!==c&&(-1===u||u>c)&&(u=c)}-1===u&&(u=o.length),this.host=o.slice(0,u),o=o.slice(u),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var v=this.hostname.split(/\./),s=0,_=v.length;_>s;s++){var x=v[s];if(x&&!x.match(O)){for(var R="",T=0,D=x.length;D>T;T++)R+=x.charCodeAt(T)>127?"x":x[T];if(!R.match(O)){var M=v.slice(0,s),N=v.slice(s+1),S=x.match(k);S&&(M.push(S[1]),N.unshift(S[2])),N.length&&(o="/"+N.join(".")+o),this.hostname=M.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!y){for(var I=this.hostname.split("."),U=[],s=0;s<I.length;++s){var B=I[s];U.push(B.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(B):B)}this.hostname=U.join(".")}var q=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+q,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!E[i])for(var s=0,_=b.length;_>s;s++){var L=b[s],F=encodeURIComponent(L);F===L&&(F=escape(L)),o=o.split(L).join(F)}var H=o.indexOf("#");-1!==H&&(this.hash=o.substr(H),o=o.slice(0,H));var V=o.indexOf("?");if(-1!==V?(this.search=o.substr(V),this.query=o.substr(V+1),t&&(this.query=P.parse(this.query)),o=o.slice(0,V)):t&&(this.search="",this.query={}),o&&(this.pathname=o),j[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",B=this.search||"";this.path=q+B}return this.href=this.format(),this},o.prototype.format=function(){
var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",o=this.hash||"",r=!1,i="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s(this.query)&&Object.keys(this.query).length&&(i=P.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||j[t])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+r+n+a+o},o.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(l(e)){var t=new o;t.parse(e,!1,!0),e=t}var n=new o;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),j[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!j[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||C[e.protocol])n.pathname=e.pathname;else{for(var r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var i=n.pathname||"",a=n.search||"";n.path=i+a}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),s=e.host||e.pathname&&"/"===e.pathname.charAt(0),p=s||u||n.host&&e.pathname,d=p,h=n.pathname&&n.pathname.split("/")||[],r=e.pathname&&e.pathname.split("/")||[],y=n.protocol&&!j[n.protocol];if(y&&(n.hostname="",n.port=null,n.host&&(""===h[0]?h[0]=n.host:h.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),p=p&&(""===r[0]||""===h[0])),s)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,h=r;else if(r.length)h||(h=[]),h.pop(),h=h.concat(r),n.search=e.search,n.query=e.query;else if(!f(e.search)){if(y){n.hostname=n.host=h.shift();var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=e.search,n.query=e.query,c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!h.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var b=h.slice(-1)[0],m=(n.host||e.host)&&("."===b||".."===b)||""===b,g=0,w=h.length;w>=0;w--)b=h[w],"."==b?h.splice(w,1):".."===b?(h.splice(w,1),g++):g&&(h.splice(w,1),g--);if(!p&&!d)for(;g--;g)h.unshift("..");!p||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift(""),m&&"/"!==h.join("/").substr(-1)&&h.push("");var O=""===h[0]||h[0]&&"/"===h[0].charAt(0);if(y){n.hostname=n.host=O?"":h.length?h.shift():"";var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return p=p||n.host&&h.length,p&&!O&&h.unshift(""),h.length?n.pathname=h.join("/"):(n.pathname=null,n.path=null),c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:26,querystring:29}]},{},[22])(22)});