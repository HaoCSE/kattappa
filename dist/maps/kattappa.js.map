/**
 * Kattappa - A block based rich text editor with support of Images, embeds( Youtube, twitter, etc)
 * @version v0.2.0
 * @link https://github.com/brijeshb42/kattappa
 * @license MIT
 */
{"version":3,"sources":["kattappa.js"],"names":[],"mappings":"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","file":"kattappa.js","sourcesContent":["(function(window) {\n\n  'use strict';\n\n  var Quill = window.Quill || null;\n  var React = window.React;\n  if(!React) {\n    throw new Error('React is required for this project to function.');\n  }\n  React.initializeTouchEvents(true);\n  // if(!Quill) {\n  //   throw new Error('Quill is required for this project to function.');\n  // }\n\n  var APP = window.Kattappa || {};\n\n  APP.BlockStructure = {\n    Text: '',\n    Image: '',\n    Quote: '',\n    UL: [{\n      content: '',\n      key: ''\n    }],\n    OL: [{\n      content: '',\n      key: ''\n    }],\n    Embed: '',\n    H2: ''\n  };\n\n  APP.uuid = function guid() {\n    function s4() {\n      return Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1);\n    }\n    return s4() + '-' + s4();\n    // return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n    //   s4() + '-' + s4() + s4() + s4();\n  };\n\n  APP.Keys = {\n    ENTER: 13,\n    ESC: 27,\n    BACKSPACE: 8\n  };\n\n  APP.Action = {\n    UP: \"up\",\n    DOWN: \"down\",\n    REMOVE: \"remove\"\n  };\n\n  APP.Blocks = {};\n\n  var QuillEnterHandler = function(quill, options) {\n    //console.log('init enter handler');\n    this.quill = quill;\n    this.options = options;\n\n    var enterKey = Quill.require('dom').KEYS.ENTER;\n\n    if(options && options.keyup && typeof options.keyup === 'function') {\n      quill.editor.root.addEventListener('keyup', function(event) {\n        if(event.keyCode === enterKey) {\n          event.preventDefault();\n          event.stopPropagation();\n          options.keyup.call(null, event);\n        }\n      });\n    }\n    if(options && options.keydown && typeof options.keydown === 'function') {\n      quill.editor.root.addEventListener('keydown', function(event) {\n        if(event.keyCode === enterKey) {\n          event.preventDefault();\n          event.stopPropagation();\n          options.keydown.call(null, event);\n        }\n      });\n    }\n  };\n\n  Quill.registerModule('enterHandler', QuillEnterHandler);\n\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var BlockText = React.createClass({\n\n    captureReturn: function() {\n      this.props.addBlock(\"Text\", this.props.position);\n    },\n\n    onContentChanged: function(content) {\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    render: function() {\n      return (\n        <div className=\"katap-text\">\n          <APP.QuillComponent\n            content={this.props.content}\n            captureReturn={this.captureReturn}\n            onContentChanged={this.onContentChanged} />\n        </div>\n      );\n    }\n\n  });\n  \n  APP.Blocks.Text = {\n    Name: 'Text',\n    React: BlockText,\n    Icon: '',\n    Empty: function() {\n      return '';\n    },\n    Description: 'Text',\n    isEmpty: function(content) {\n      return (content.replace(/(<([^>]+)>)/ig,'') === '');\n    }\n  };\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var BlockQuote = React.createClass({\n\n    // focus: function() {\n    //   //this.quill.focus();\n    // },\n\n    // componentDidMount: function(){\n    //   //this.initiateEditor();\n    //   this.focus();\n    // },\n\n    captureReturn: function() {\n      this.props.addBlock(\"Text\", this.props.position);\n    },\n\n    onContentChanged: function(content) {\n      var content = {\n        content: content,\n        credit: this.props.content.credit\n      };\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    onCreditChange: function(e) {\n      var content = {\n        content: this.props.content.content,\n        credit: e.target.value\n      };\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    render: function() {\n      return (\n        <blockquote className=\"katap-text\">\n          <input\n            className=\"katap-blockquote-credit\"\n            type=\"text\"\n            placeholder=\"Credit\"\n            onChange={this.onCreditChange}\n            value={this.props.content.credit} />\n          <APP.QuillComponent\n            content={this.props.content.content}\n            captureReturn={this.captureReturn}\n            onContentChanged={this.onContentChanged} />\n        </blockquote>\n      );\n    }\n\n  });\n  \n  //APP.BlockTypes.Text = 'Text';\n  APP.Blocks.Quote = {\n    Name: 'Quote',\n    React: BlockQuote,\n    Icon: '',\n    Empty: function() {\n      return {\n        content: '',\n        credit: ''\n      };\n    },\n    Description: 'Block Quote',\n    isEmpty: function(content) {\n      return (content.replace(/(<([^>]+)>)/ig,'') === '');\n    }\n  };\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var items = [\n    {\n      label:'Text',\n      type:'group',\n      items: [\n        { type:'link', label:'Link'}\n      ]\n    }\n  ];\n\n  var H2 = React.createClass({\n\n    captureReturn: function() {\n      console.log('enter');\n      this.props.addBlock(\"Text\", this.props.position);\n    },\n\n    onContentChanged: function(content) {\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    render: function() {\n      return (\n        <h2 className=\"katap-h2\">\n          <APP.QuillComponent\n            content={this.props.content}\n            captureReturn={this.captureReturn}\n            onContentChanged={this.onContentChanged} />\n        </h2>\n      );\n    }\n\n  });\n\n  var H3 = React.createClass({\n\n    captureReturn: function() {\n      console.log('enter');\n      this.props.addBlock(\"Text\", this.props.position);\n    },\n\n    onContentChanged: function(content) {\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    render: function() {\n      return (\n        <h3 className=\"katap-h3\">\n          <APP.QuillComponent\n            content={this.props.content}\n            captureReturn={this.captureReturn}\n            onContentChanged={this.onContentChanged} />\n        </h3>\n      );\n    }\n\n  });\n\n  var H4 = React.createClass({\n\n    captureReturn: function() {\n      console.log('enter');\n      this.props.addBlock(\"Text\", this.props.position);\n    },\n\n    onContentChanged: function(content) {\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    render: function() {\n      return (\n        <h4 className=\"katap-h4\">\n          <APP.QuillComponent\n            content={this.props.content}\n            captureReturn={this.captureReturn}\n            onContentChanged={this.onContentChanged} />\n        </h4>\n      );\n    }\n\n  });\n  \n  APP.BlockTypes.Text = 'Text';\n  APP.Blocks.H2 = {\n    Name: 'H2',\n    React: H2,\n    Icon: '',\n    Empty: function() {\n      return '';\n    },\n    Description: 'Heading 2',\n    isEmpty: function(content) {\n      if(content.replace(/(<([^>]+)>)/ig,'') === '') {\n        return true;\n      }\n      return false;\n    }\n  };\n\n  // APP.Blocks.H3 = {\n  //   Name: 'H3',\n  //   React: H3,\n  //   Icon: '',\n  //   Empty: '',\n  //   isEmpty: function(content) {\n  //     if(content.replace(/(<([^>]+)>)/ig,'') === '') {\n  //       return true;\n  //     }\n  //     return false;\n  //   }\n  // };\n\n  // APP.Blocks.H4 = {\n  //   Name: 'H4',\n  //   React: H4,\n  //   Icon: '',\n  //   Empty: '',\n  //   isEmpty: function(content) {\n  //     if(content.replace(/(<([^>]+)>)/ig,'') === '') {\n  //       return true;\n  //     }\n  //     return false;\n  //   }\n  // };\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var HR = React.createClass({\n\n    render: function() {\n      return (\n        <hr className=\"katap-hr\" />\n      );\n    }\n  });\n\n  APP.Blocks.HR = {\n    Name: 'HR',\n    React: HR,\n    Icon: '',\n    Empty: function() {\n      return '';\n    },\n    Description: 'Break',\n    isEmpty: function(content) {\n      return true;\n    }\n  };\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var Droppable = React.createClass({\n    getInitialState: function() {\n      return {\n        className: ''\n      };\n    },\n\n    getDefaultProps: function() {\n      return {\n        supportClick: true,\n        multiple: false\n      };\n    },\n\n    getClassName: function() {\n      return 'katap-droppable '+(this.props.className || this.state.className);\n    },\n\n    componentDidMount: function() {\n      this.refs.droppable.getDOMNode().focus();\n    },\n\n    onDragOver: function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.dataTransfer.dropEffect = 'copy';\n      var effectAllowed = e.dataTransfer.effectAllowed;\n      if (effectAllowed === 'all' || effectAllowed === 'uninitialized') {\n        this.setState({\n          className: 'katap-drop-active'\n        });\n      }\n      if (this.props.onDragOver) {\n        this.props.onDragOver(e);\n      }\n    },\n\n    onDragLeave: function(e) {\n      this.setState({\n        className: ''\n      });\n\n      if (this.props.onDragLeave) {\n        this.props.onDragLeave(e);\n      }\n    },\n\n    onClick: function() {\n      var fileInput = React.findDOMNode(this.refs.input);\n      fileInput.value = null;\n      fileInput.click();\n    },\n\n    onDrop: function(e) {\n      e.preventDefault();\n      var files;\n      if(e.dataTransfer) {\n        files = e.dataTransfer.files;\n      } else if(e.target) {\n        files = e.target.files;\n      }\n      var maxFiles = (this.props.multiple) ? files.length : 1;\n      for (var i = 0; i < maxFiles; i++) {\n        files[i].preview = URL.createObjectURL(files[i]);\n      }\n      if(this.props.onDrop) {\n        files = Array.prototype.slice.call(files, 0, maxFiles);\n        //console.log(files);\n        this.props.onDrop(files);\n      }\n    },\n\n    render: function() {\n      return (\n        <div\n          ref=\"droppable\"\n          className={this.getClassName()}\n          onDragOver={this.onDragOver}\n          onDragLeave={this.onDragLeave}\n          onClick={this.onClick}\n          onDrop={this.onDrop} >\n          <input\n            ref=\"input\"\n            type=\"file\"\n            style={{display: 'none'}}\n            multiple={this.props.multiple}\n            onChange={this.onDrop} />\n          {this.props.children}\n        </div>\n      );\n    }\n  });\n\n  APP.Droppable = Droppable;\n  window.Kattappa = APP;\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var UploadUrl = \"\";\n\n  var BlockImage = React.createClass({\n\n    getInitialState: function() {\n      return {\n        message: 'Drop image here or click to add.'\n      };\n    },\n\n    handleImage: function(files) {\n      var self = this;\n      var file = files[0];\n      if(file.type.indexOf(\"image/\") !== 0) {\n        alert(\"Provide a valid image file.\");\n        return;\n      }\n      if(APP.Blocks.Image.UploadUrl !== \"\") {\n        var data = new FormData();\n        data.append(\"image\", file);\n        fetch(APP.Blocks.Image.UploadUrl, {\n          method: 'POST',\n          credentials: 'same-origin',\n          body: data\n        }).then(function(response) {\n          if(response.status >= 200 && response.status < 300) {\n            return response.json();\n          } else {\n            var error = new Error(response.statusText);\n            error.response = response;\n            throw error;\n          }\n        }).then(function(json) {\n          if(json.type && json.type === \"success\") {\n            //console.log(json);\n            if(self.props.onContentChanged) {\n              self.props.onContentChanged(self.props.position, json.message);\n            }\n          } else {\n            alert('Could not upload.');\n          }\n        }).catch(function(error) {\n          console.log(error);\n          alert('Error while uploading. Retry.');\n        });\n      } else if(this.props.onContentChanged){\n        this.props.onContentChanged(this.props.position, file.preview);\n      }\n    },\n\n    render: function() {\n      if(this.props.content === \"\") {\n        return (\n          <div className=\"katap-image\">\n            <APP.Droppable\n              onDrop={this.handleImage}>\n              <p>{this.state.message}</p>\n            </APP.Droppable>\n          </div>\n        );\n      } else {\n        return (\n          <div className=\"katap-image\">\n            <img src={this.props.content} />\n          </div>\n        );\n      }\n    }\n\n  });\n  \n  //APP.BlockTypes.Text = 'Text';\n  APP.Blocks.Image = {\n    Name: 'Image',\n    React: BlockImage,\n    Icon: '',\n    Empty: function() {\n      return '';\n    },\n    Description: 'Image',\n    UploadUrl: UploadUrl,\n    isEmpty: function(content) {\n      return (content === '');\n    }\n  };\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var Action = APP.Action;\n\n  var LI = React.createClass({\n\n    captureReturn: function() {\n      this.props.addItem(this.props.position);\n    },\n\n    onContentChanged: function(content) {\n      //console.log(content);\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    render: function() {\n      return (\n        <APP.QuillComponent\n          content={this.props.content}\n          captureReturn={this.captureReturn}\n          onContentChanged={this.onContentChanged} />\n      );\n    }\n\n  });\n\n  var UL = React.createClass({\n    onContentChanged: function(position, content) {\n      this.props.content[position].content = content;\n      this.props.onContentChanged(this.props.position, this.props.content);\n    },\n\n    addItem: function(position) {\n      if(position < 0 || position >= this.props.content.length) {\n        return;\n      }\n      var content = this.props.content;\n      content.push({\n        content: '',\n        key: APP.uuid()\n      });\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    handleItemRemove: function(action, position) {\n      console.log(position);\n      if(this.props.content.length < 2) {\n        return;\n      }\n      var content = this.props.content;\n      console.log(content);\n      content.splice(position, 1);\n      console.log(content);\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    renderListItem: function() {\n      var self = this;\n      var li = [];\n      this.props.content.map(function(item, index) {\n        li.push(\n          <li key={item.key}>\n            <APP.BlockControl\n              onlyRemove={true}\n              blockAction={self.handleItemRemove}\n              position={index}\n              length={self.props.content.length} />\n            <LI\n              position={index}\n              content={item.content}\n              addItem={self.addItem}\n              onContentChanged={self.onContentChanged} />\n          </li>\n        );\n      });\n      return li;\n    },\n\n    render: function() {\n      return (\n        <ul className=\"katap-list\">\n        {this.renderListItem()}\n        </ul>\n      );\n    }\n  });\n\n  APP.Blocks.UL = {\n    Name: 'UL',\n    React: UL,\n    Icon: '',\n    Empty: function() {\n      return [{\n        content: '',\n        key: APP.uuid()\n      }];\n    },\n    Description: 'Undordered List',\n    isEmpty: function(content) {\n      for(var i = 0; i<content.length; i++) {\n        if(content[i].content.replace(/(<([^>]+)>)/ig,'') !== '') {\n          return false\n        }\n      }\n      return true;\n    }\n  };\n\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var Action = APP.Action;\n\n  var LI = React.createClass({\n\n    captureReturn: function() {\n      this.props.addItem(this.props.position);\n    },\n\n    onContentChanged: function(content) {\n      //console.log(content);\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    render: function() {\n      return (\n        <APP.QuillComponent\n          content={this.props.content}\n          captureReturn={this.captureReturn}\n          onContentChanged={this.onContentChanged} />\n      );\n    }\n\n  });\n\n  var OL = React.createClass({\n    onContentChanged: function(position, content) {\n      this.props.content[position].content = content;\n      this.props.onContentChanged(this.props.position, this.props.content);\n    },\n\n    addItem: function(position) {\n      if(position < 0 || position >= this.props.content.length) {\n        return;\n      }\n      var content = this.props.content;\n      content.push({\n        content: '',\n        key: APP.uuid()\n      });\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    handleItemRemove: function(action, position) {\n      console.log(position);\n      if(this.props.content.length < 2) {\n        return;\n      }\n      var content = this.props.content;\n      console.log(content);\n      content.splice(position, 1);\n      console.log(content);\n      this.props.onContentChanged(this.props.position, content);\n    },\n\n    renderListItem: function() {\n      var self = this;\n      var li = [];\n      this.props.content.map(function(item, index) {\n        li.push(\n          <li key={item.key}>\n            <APP.BlockControl\n              onlyRemove={true}\n              blockAction={self.handleItemRemove}\n              position={index}\n              length={self.props.content.length} />\n            <LI\n              position={index}\n              content={item.content}\n              addItem={self.addItem}\n              onContentChanged={self.onContentChanged} />\n          </li>\n        );\n      });\n      return li;\n    },\n\n    render: function() {\n      return (\n        <ol className=\"katap-list\">\n        {this.renderListItem()}\n        </ol>\n      );\n    }\n  });\n\n  APP.Blocks.OL = {\n    Name: 'OL',\n    React: OL,\n    Icon: '',\n    Empty: function() {\n      return [{\n        content: '',\n        key: APP.uuid()\n      }];\n    },\n    Description: 'Ordered List',\n    isEmpty: function(content) {\n      for(var i = 0; i<content.length; i++) {\n        if(content[i].content.replace(/(<([^>]+)>)/ig,'') !== '') {\n          return false\n        }\n      }\n      return true;\n    }\n  };\n\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var urlRegExp =/^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/i;\n  \n  function getDomain(url) {\n    var a = window.document.createElement(\"a\");\n    a.href = url;\n    return a.hostname;\n  }\n\n  var Embed = React.createClass({\n\n    getInitialState: function() {\n      return {\n        loaded: false,\n        domain: '',\n        url: ''\n      };\n    },\n\n    getDefaultProps: function() {\n      return {\n        content: ''\n      };\n    },\n\n    checkUrls: function(url, isProp){\n      if(urlRegExp.test(url)) {\n        var domain = getDomain(url);\n        for(var key in APP.Blocks.Embed.Types) {\n          if(domain.indexOf(key) > -1) {\n            this.setState({\n              loaded: true,\n              domain: key,\n              url: url\n            });\n            return;\n          }\n        }\n        alert('This URL is not supported.');\n        this.refs.getDOMNode().value = '';\n      } else {\n        if(!isProp) {\n          alert(\"Enter a valid url\");\n        }\n      }\n    },\n\n    handleUrl: function(event) {\n      if(event.keyCode === APP.Keys.ENTER) {\n        this.checkUrls(event.target.value, false);\n      }\n    },\n\n    componentDidMount: function() {\n      this.refs.input.getDOMNode().focus();\n      this.checkUrls(this.props.content, true);\n    },\n\n    checkContent: function(ok) {\n      if(ok) {\n        this.props.onContentChanged(this.props.position, this.state.url);\n      } else if(this.props.content === this.state.url) {\n      } else {\n        this.setState({\n          loaded: false\n        });\n      }\n    },\n\n    renderBlock: function() {\n      return (\n        React.createElement(APP.Blocks.Embed.Types[this.state.domain], {\n          url: this.state.url,\n          checkContent: this.checkContent\n        })\n      );\n    },\n\n    render: function() {\n      if(this.state.loaded) {\n        return this.renderBlock();\n      } else {\n        return (\n          <div className=\"katap-embed\">\n            <input\n              ref=\"input\"\n              type=\"text\"\n              placeholder=\"Enter URL and press enter\"\n              onKeyUp={this.handleUrl} />\n          </div>\n        );\n      }\n    }\n  });\n\n  APP.Blocks.Embed = {\n    Name: 'Embed',\n    React: Embed,\n    Icon: '',\n    Empty: function() {\n      return '';\n    },\n    Description: 'Embed',\n    isEmpty: function(content) {\n      return (content === '');\n    },\n    Types: {}\n  };\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n\n  var APP = window.Kattappa || {};\n  var Types = APP.Blocks.Embed.Types || {};\n\n  var Instagram = React.createClass({\n\n    getInitialState: function() {\n      return {\n        message: 'Wait',\n        id: '',\n        valid: false\n      };\n    },\n\n    getDefaultProps: function() {\n      return {\n        url: '',\n        regex: /https?:\\/\\/instagram\\.com\\/p\\/([^\\/]+)\\/?.*/gi\n      };\n    },\n\n    componentDidMount: function() {\n      this.validate();\n    },\n\n    validate: function() {\n      var match;\n      match = this.props.regex.exec(this.props.url);\n      this.props.regex.lastIndex = 0;\n      if(!match) {\n        this.props.checkContent(false);\n        this.setState({\n          message: 'error.'\n        });\n        return;\n      }\n      this.setState({\n        message: 'OK.',\n        id: match[1],\n        valid: true\n      });\n      this.props.checkContent(true);\n    },\n\n    render: function() {\n      if(this.state.valid) {\n        return (\n          <div className=\"katap-embed katap-instagram\">\n          <iframe\n          src={'//instagram.com/p/'+this.state.id+'/embed'}\n          frameBorder={0}\n          allowFullScreen={true} />\n          </div>\n          );\n      }\n      return (\n        <div className=\"katap-embed\">Invalid instagram URL.</div>\n        );\n    }\n  });\n  \n  Types.instagram = Instagram;\n  \n  APP.Blocks.Embed.Types = Types\n  window.Kattappa = APP;\n})(window);\n\n(function(window) {\n\n  var APP = window.Kattappa || {};\n  var Types = APP.Blocks.Embed.Types || {};\n\n  var Youtube = React.createClass({\n\n    getInitialState: function() {\n      return {\n        message: 'Wait',\n        id: '',\n        valid: false\n      };\n    },\n\n    getDefaultProps: function() {\n      return {\n        url: '',\n        regex: /^.*(?:(?:youtu\\.be\\/)|(?:youtube\\.com)\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*)/\n      };\n    },\n\n    componentDidMount: function() {\n      this.validate();\n    },\n\n    validate: function() {\n      var match;\n      match = this.props.regex.exec(this.props.url);\n      this.props.regex.lastIndex = 0;\n      if(!match) {\n        this.props.checkContent(false);\n        this.setState({\n          message: 'error.'\n        });\n        return;\n      }\n      this.setState({\n        message: 'OK.',\n        id: match[1],\n        valid: true\n      });\n      this.props.checkContent(true);\n    },\n\n    render: function() {\n      if(this.state.valid) {\n        return (\n          <div className=\"katap-embed katap-youtube\">\n          <iframe\n            src={'//youtube.com/embed/'+this.state.id}\n            frameBorder={0}\n            width={580}\n            height={320}\n            allowFullScreen={true} />\n          </div>\n        );\n      }\n      return (\n        <div className=\"katap-embed\">Invalid youtube URL.</div>\n      );\n    }\n  });\n  \n  Types.youtu = Youtube;\n  \n  APP.Blocks.Embed.Types = Types\n  window.Kattappa = APP;\n})(window);\n\n(function(window) {\n\n  var APP = window.Kattappa || {};\n  var Types = APP.Blocks.Embed.Types || {};\n\n  var Vimeo = React.createClass({\n\n    getInitialState: function() {\n      return {\n        message: 'Wait',\n        id: '',\n        valid: false\n      };\n    },\n\n    getDefaultProps: function() {\n      return {\n        url: '',\n        regex: /(?:http[s]?:\\/\\/)?(?:www.)?vimeo\\.co(?:.+(?:\\/)([^\\/].*)+$)/\n      };\n    },\n\n    componentDidMount: function() {\n      this.validate();\n    },\n\n    validate: function() {\n      var match;\n      match = this.props.regex.exec(this.props.url);\n      this.props.regex.lastIndex = 0;\n      if(!match) {\n        this.props.checkContent(false);\n        this.setState({\n          message: 'error.'\n        });\n        return;\n      }\n      this.setState({\n        message: 'OK.',\n        id: match[1],\n        valid: true\n      });\n      this.props.checkContent(true);\n    },\n\n    render: function() {\n      if(this.state.valid) {\n        return (\n          <div className=\"katap-embed katap-vimeo\">\n          <iframe\n            src={'//player.vimeo.com/video/'+this.state.id}\n            frameBorder={0}\n            width={580}\n            height={320}\n            allowFullScreen={true} />\n          </div>\n        );\n      }\n      return (\n        <div className=\"katap-embed\">Invalid vimeo URL.</div>\n      );\n    }\n  });\n  \n  Types.vimeo = Vimeo;\n  \n  APP.Blocks.Embed.Types = Types\n  window.Kattappa = APP;\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var Action = APP.Action;\n  var blocks = APP.Blocks;\n\n  var Toolbar = React.createClass({\n    getInitialState: function() {\n      return {\n        visible: false,\n        types: Object.keys(blocks)\n      };\n    },\n\n    toggleState: function(e) {\n      var nodes = Array.prototype.slice.call(e.currentTarget.children);\n      var index = nodes.indexOf( e.target );\n      if(index < 0) {\n        return;\n      }\n      this.setState({\n        visible: !this.state.visible\n      });\n      if(!this.state.visible || index === 0) {\n      } else {\n        this.props.addBlock(nodes[index].getAttribute('title'), this.props.position);\n      }\n    },\n\n    addBlock: function(type, position) {\n      this.props.addBlock()\n    },\n\n    render: function() {\n      var self = this;\n      if(!this.state.visible) {\n        return (\n          <div\n            className=\"katap-toolbar\"\n            onClick={this.toggleState}>\n            <button title=\"Add block\">+</button>\n          </div>\n        );\n      }\n      return (\n        <div\n          className=\"katap-toolbar\"\n          onClick={this.toggleState}>\n          <button title=\"Close\">&times;</button>\n          {this.state.types.map(function(typ, pos) {\n              return (\n                <button\n                  title={typ}\n                  key={pos}>\n                  {blocks[typ].Description}\n                </button>\n              );\n            })}\n        </div>\n      );\n    }\n  });\n\n  /*\n  ** Handles block positioning. Can remove a block or move it up/down as required.\n  */\n  var BlockControl = React.createClass({\n\n    getDefaultProps: function() {\n      onlyRemove: false\n    },\n\n    handleClick: function(e) {\n      //console.log(e);\n      var nodes = Array.prototype.slice.call(e.currentTarget.children);\n      var index = nodes.indexOf(e.target);\n      if(index < 0) {\n        return;\n      }\n      var action = nodes[index].getAttribute(\"data-action\");\n      this.props.blockAction(action, this.props.position);\n    },\n\n    getToolbar: function(index) {\n      // if(index === 0 && this.props.length < 2) {\n      //   return null;\n      // } \n      if(this.props.onlyRemove) {\n        return (\n          <div\n            className=\"katap-control-toolbar\"\n            onClick={this.handleClick}>\n            <button title=\"Remove\" data-action={Action.REMOVE} key={Action.REMOVE}>&times;</button>\n          </div>\n        );\n      }\n      var buttons = [];\n      if(index === 0 && this.props.length < 2) {\n        buttons.push(<button title=\"Remove\" data-action={Action.REMOVE} key={Action.REMOVE}>&times;</button>);\n      } else if(index === 0) {\n        buttons.push(<button title=\"Remove\" data-action={Action.REMOVE} key={Action.REMOVE}>&times;</button>);\n        buttons.push(<button title=\"Move Down\" data-action={Action.DOWN} key={Action.DOWN}>↓</button>);\n      } else if(index === this.props.length-1) {\n        buttons.push(<button title=\"Remove\" data-action={Action.REMOVE} key={Action.REMOVE}>&times;</button>);\n        buttons.push(<button title=\"Move Up\" data-action={Action.UP} key={Action.UP}>↑</button>);\n      } else {\n        buttons.push(<button title=\"Remove\" data-action={Action.REMOVE} key={Action.REMOVE}>&times;</button>);\n        buttons.push(<button title=\"Move Up\" data-action={Action.UP} key={Action.UP}>↑</button>);\n        buttons.push(<button title=\"Move Down\" data-action={Action.DOWN} key={Action.DOWN}>↓</button>);\n      }\n      return (\n        <div\n          className=\"katap-control-toolbar\"\n          onClick={this.handleClick}>\n          {buttons}\n        </div>\n      );\n    },\n\n    render: function() {\n      return this.getToolbar(this.props.position);\n    }\n  });\n\n  APP.Toolbar = Toolbar;\n  APP.BlockControl = BlockControl;\n  window.Kattappa = APP;\n\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n  var T = React.PropTypes;\n\n  var ExtraEnter = \"<div><br></div>\";\n\n  if (React.cloneElement) {\n    var cloneElement = React.cloneElement;\n  } else if (React.addons && React.addons.cloneWithProps) {\n    var cloneElement = React.addons.cloneWithProps;\n  } else {\n    throw new Error('React addons are required when using React 0.12 or less.');\n  }\n\n  var defaultItems = [\n    {\n      label:'Text',\n      type:'group',\n      items: [\n        { type:'bold', label:'Bold'},\n        { type:'italic', label:'Italic'},\n        //{ type:'underline', label:'Underline'},\n        { type:'link', label:'Link'}\n      ]\n    }\n  ];\n\n  /*\n  * Quill Component\n  */\n\n  var QuillComponent = React.createClass({\n\n    onConvert: function(c) {\n      console.log(c);\n      console.log(c.replace(/(<([^>]+)>)/ig,\"\"));\n    },\n\n    getDefaultProps: function() {\n      return {\n        className: 'ql-editor',\n        theme: 'base',\n        modules: {\n          'link-tooltip': true\n        },\n        content: ''\n      };\n    },\n\n    enterPressed: function() {\n      //console.log(this.editor.getSelection());\n      if(this.props.enterPressed) {\n        this.props.enterPressed();\n      }\n    },\n\n    getInitialState: function() {\n      return {\n        showToolbar: true,\n      };\n    },\n\n    createEditor: function($el, config) {\n      //console.log(this.props);\n      var editor = new Quill($el, config);\n      this.hookEditor(editor);\n      return editor;\n    },\n\n    hookEditor: function(editor) {\n      editor.on('text-change', function(delta, source) {\n        if (this.onEditorChange) {\n          this.onEditorChange(editor.getHTML(), delta, source);\n        }\n      }.bind(this));\n\n      editor.on('selection-change', function(range, source) {\n        if (this.onEditorChangeSelection) {\n          this.onEditorChangeSelection(range, source);\n        }\n      }.bind(this));\n      editor.addModule('enterHandler', {\n        keydown: this.captureReturn\n      });\n      this.setEditorContents(editor, this.props.content);\n    },\n\n    focus: function() {\n      this.state.editor.focus();\n    },\n\n    onEditorChange: function(value, delta, source) {\n      if(value.indexOf(ExtraEnter) > 0) {\n        value = value.replace(ExtraEnter, \"\");\n        this.state.editor.setHTML(value);\n        this.state.editor.setSelection(1, 1);\n      }\n      if(this.props.onContentChanged) {\n        this.props.onContentChanged(value);\n      }\n    },\n\n    captureReturn: function() {\n      if(this.props.captureReturn) {\n        this.props.captureReturn();\n      }\n    },\n\n    getEditorContents: function() {\n      return this.state.content;\n    },\n\n    setEditorContents: function(editor, value) {\n      var sel = editor.getSelection();\n      editor.setHTML(value);\n      if (sel) this.setEditorSelection(editor, sel);\n    },\n\n    isControlled: function() {\n      return 'value' in this.props;\n    },\n\n    getEditorConfig: function() {\n      var config = {\n        theme:        this.props.theme,\n        modules:      this.props.modules,\n        pollInterval: this.props.pollInterval,\n        formats: ['bold', 'italic', 'link']\n      };\n      if (!config.modules.toolbar) {\n        config.modules = JSON.parse(JSON.stringify(config.modules));\n        config.modules.toolbar = {\n          container: this.refs.toolbar.getDOMNode()\n        };\n      }\n      return config;\n    },\n\n    getEditorElement: function() {\n      return this.refs.editor.getDOMNode();\n    },\n\n    componentDidMount: function() {\n      var editor = this.createEditor(\n        this.getEditorElement(),\n        this.getEditorConfig()\n      );\n      this.setState({editor:editor});\n      editor.focus();\n      editor.setHTML(this.props.content);\n    },\n\n    renderItems: function(item, index) {\n      return (\n        <span\n          className={\"ql-format-button ql-\"+item.type}\n          title={item.label}\n          key={index} />\n      );\n    },\n\n    renderGroups: function() {\n      var self = this;\n      var items = this.props.items || defaultItems;\n      //console.log(items);\n      var groups = items.map(function(item, index) {\n        return (\n          <span className={\"ql-format-\"+item.type} key={index}>\n            {item.items.map(self.renderItems)}\n          </span>\n        );\n      });\n      return groups;\n    },\n\n    render: function() {\n      var visibility = (this.state.showToolbar) ? 'visible': 'hidden';\n      var self = this;\n      return (\n        <div className=\"quill-rte\">\n          <div\n            ref=\"toolbar\"\n            className=\"ql-toolbar ql-snow\"\n            style={{visibility: visibility}}>\n            {self.renderGroups()}\n          </div>\n          <div className=\"ql-container ql-snow\" ref=\"editor\" />\n        </div>\n      );\n    }\n\n  });\n\n  APP.QuillComponent = QuillComponent;\n\n  window.Kattappa = APP;\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n  var T = React.PropTypes;\n  var Medium = window.Medium;\n\n  if (React.cloneElement) {\n    var cloneElement = React.cloneElement;\n  } else if (React.addons && React.addons.cloneWithProps) {\n    var cloneElement = React.addons.cloneWithProps;\n  } else {\n    throw new Error('React addons are required when using React 0.12 or less.');\n  }\n\n  var defaultItems = [\n    {\n      label:'Text',\n      type:'group',\n      items: [\n        { type:'bold', label:'Bold'},\n        { type:'italic', label:'Italic'},\n        //{ type:'underline', label:'Underline'},\n        { type:'link', label:'Link'}\n      ]\n    }\n  ];\n\n  /*\n  * Medium Component\n  */\n\n  var MediumComponent = React.createClass({\n\n    onConvert: function(c) {\n      console.log(c);\n      console.log(c.replace(/(<([^>]+)>)/ig,\"\"));\n    },\n\n    getDefaultProps: function() {\n      return {\n        className: 'katap-medium-editor',\n        theme: 'base',\n        modules: {\n          'link-tooltip': true\n        },\n        content: ''\n      };\n    },\n\n    enterPressed: function() {\n      console.log(this.editor.getSelection());\n      if(this.props.enterPressed) {\n        this.props.enterPressed();\n      }\n    },\n\n    getInitialState: function() {\n      return {\n        showToolbar: true,\n      };\n    },\n\n    createEditor: function($el, config) {\n      var editor = new Medium(this.getEditorConfig());\n      //this.hookEditor(editor);\n      return editor;\n    },\n\n    hookEditor: function(editor) {\n      editor.on('text-change', function(delta, source) {\n        if (this.onEditorChange) {\n          this.onEditorChange(editor.getHTML(), delta, source);\n        }\n      }.bind(this));\n\n      editor.on('selection-change', function(range, source) {\n        if (this.onEditorChangeSelection) {\n          this.onEditorChangeSelection(range, source);\n        }\n      }.bind(this));\n      editor.addModule('enterHandler', {\n        keydown: this.captureReturn\n      });\n      this.setEditorContents(editor, this.props.content);\n    },\n\n    focus: function() {\n      this.state.editor.focus();\n    },\n\n    onEditorChange: function(value, delta, source) {\n      if(value.indexOf(ExtraEnter) > 0) {\n        value = value.replace(ExtraEnter, \"\");\n        this.state.editor.setHTML(value);\n        this.state.editor.setSelection(1, 1);\n      }\n      if(this.props.onContentChanged) {\n        this.props.onContentChanged(value);\n      }\n    },\n\n    captureReturn: function() {\n      if(this.props.captureReturn) {\n        this.props.captureReturn();\n      }\n    },\n\n    getEditorContents: function() {\n      return this.state.content;\n    },\n\n    setEditorContents: function(editor, value) {\n      var sel = editor.getSelection();\n      editor.setHTML(value);\n      if (sel) this.setEditorSelection(editor, sel);\n    },\n\n    isControlled: function() {\n      return 'value' in this.props;\n    },\n\n    getEditorConfig: function() {\n      var config = {\n        element: this.getEditorElement(),\n        mode: Medium.inlineRichMode,\n        tags: {\n          'innerLevel': ['a', 'b', 'i'],\n          'break': 'br',\n          'horizontalRule': 'hr',\n          'paragraph': 'p',\n        },\n        cssClasses: {\n          editor: 'Medium',\n          pasteHook: 'Medium-paste-hook',\n          placeholder: 'Medium-placeholder',\n          clear: 'Medium-clear'\n        },\n        attributes: {\n          remove: ['style', 'class']\n        },\n        pasteAsText: false,\n      };\n      return config;\n    },\n\n    getEditorElement: function() {\n      return this.refs.editor.getDOMNode();\n    },\n\n    componentDidMount: function() {\n      var editor = this.createEditor(\n        this.getEditorConfig()\n      );\n      this.setState({editor:editor});\n      editor.focus();\n      console.log(editor);\n      //editor.setHTML(this.props.content);\n    },\n\n    renderItems: function(item, index) {\n      return (\n        <span\n          className={\"ql-format-button ql-\"+item.type}\n          title={item.label}\n          key={index} />\n      );\n    },\n\n    renderGroups: function() {\n      var self = this;\n      var items = this.props.items || defaultItems;\n      //console.log(items);\n      var groups = items.map(function(item, index) {\n        return (\n          <span className={\"ql-format-\"+item.type} key={index}>\n            {item.items.map(self.renderItems)}\n          </span>\n        );\n      });\n      return groups;\n    },\n\n    render: function() {\n      //var visibility = (this.state.showToolbar) ? 'visible': 'hidden';\n      var visibility = 'visible';\n      var self = this;\n      return (\n        <div className=\"katap-medium-rte\">\n          <div\n            ref=\"toolbar\"\n            className=\"katap-medium-toolbar\"\n            style={{visibility: visibility}}>\n            {self.renderGroups()}\n          </div>\n          <div className=\"katap-medium-container\" ref=\"editor\" />\n        </div>\n      );\n    }\n\n  });\n\n  APP.MediumComponent = MediumComponent;\n\n  window.Kattappa = APP;\n})(window);\n\n(function(window) {\n  var APP = window.Kattappa || {};\n\n  var initialState = {\n    blocks: []\n  };\n\n  var Action = APP.Action;\n\n  var Editor = React.createClass({\n    getInitialState: function() {\n      return initialState;\n    },\n\n    getDefaultProps: function() {\n      return {\n        blockUrl: ''\n      };\n    },\n\n    componentDidMount: function() {\n      var self = this;\n      if(this.props.blockUrl !== '') {\n        fetch(self.props.blockUrl, {\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(function(response) {\n          if (response.status >= 200 && response.status < 300) {\n            return response.json();\n          } else {\n            var error = new Error(response.statusText);\n            error.response = response;\n            throw error;\n          }\n        }).then(function(json) {\n          if(self.props.processData) {\n            self.setState({\n              blocks: self.props.processData(json)\n            });\n          } else {\n            console.warn('Provide a function to process blocks.');\n          }\n        }).catch(function(e) {\n          console.error(e);\n        })\n      }\n    },\n\n    handleBlockAction: function(action, position) {\n      var newBlocks = this.state.blocks;\n      if(action === Action.REMOVE) {\n        if(APP.Blocks[newBlocks[position].type].isEmpty(newBlocks[position].content) || confirm('Sure?')) {\n          newBlocks.splice(position, 1);\n        } else {\n          return;\n        }\n      } else if(action === Action.UP) {\n        newBlocks.splice(position - 1, 2, newBlocks[position], newBlocks[position-1]);\n      } else if(action === Action.DOWN) {\n        newBlocks.splice(position , 2, newBlocks[position + 1], newBlocks[position]);\n      }\n      this.setState({\n        blocks: newBlocks\n      });\n    },\n\n    addBlock: function(type, position) {\n      if(position < 0 || position > this.state.blocks.length) {\n        return;\n      }\n      var newBlock = {\n        type: type,\n        content: APP.Blocks[type].Empty(),\n        key: APP.uuid()\n      };\n      var newBlocks = this.state.blocks;\n      newBlocks.splice(position+1, 0, newBlock);\n      this.setState({\n        blocks: newBlocks\n      });\n    },\n\n    contentChange: function(position, content) {\n      var newBlocks = this.state.blocks;\n      newBlocks[position].content = content;\n      this.setState({\n        blocks: newBlocks\n      });\n    },\n\n    getToolbar: function(index) {\n      return (\n        <APP.BlockControl\n          blockAction={this.handleBlockAction}\n          position={index}\n          length={this.state.blocks.length} />\n      );\n    },\n\n    renderBlocks: function() {\n      var self = this;\n      var blocks = this.props.blocks || this.state.blocks;\n      if(blocks.length < 1) {\n        return (\n          <APP.Toolbar\n            position={0}\n            addBlock={this.addBlock} />\n        );\n      }\n      var rndr = blocks.map(function(block, index) {\n\n        return (\n          React.createElement(\"div\", {key: block.key, className: \"katap-container\"},\n            self.getToolbar(index),\n            React.createElement(APP.Blocks[block.type].React, {\n              ref: 'block'+index, \n              position: index, \n              content: block.content, \n              addBlock: self.addBlock, \n              onContentChanged: self.contentChange}), \n            React.createElement(APP.Toolbar, {\n              position: index, \n              addBlock: self.addBlock})\n          )\n        );\n      });\n      return rndr;\n    },\n\n    passBlocks: function() {\n      if(this.props.onSave) {\n        this.props.onSave(this.state.blocks);\n      }\n    },\n\n    render: function() {\n      if(this.state.blocks.length > 0) {\n        return (\n          <div className='katap-listing'>\n            <button\n              onClick={this.passBlocks}\n              className=\"katap-savebtn\">Save</button>\n            {this.renderBlocks()}\n          </div>\n        );\n      }\n      return (\n        <div className='katap-listing'>\n          {this.renderBlocks()}\n        </div>\n      );\n    }\n  });\n  \n  APP.Editor = Editor;\n  window.Kattappa = APP;\n\n})(window);\n\n"],"sourceRoot":"/source/"}