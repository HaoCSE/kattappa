/*!
 * kattappa
 * Version - 0.6.0
 * Author - Brijesh Bittu <brijeshb42@gmail.com>
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom"),require("immutable")):"function"==typeof define&&define.amd?define(["react","react-dom","immutable"],t):"object"==typeof exports?exports.Kattappa=t(require("react"),require("react-dom"),require("immutable")):e.Kattappa=t(e.React,e.ReactDOM,e.Immutable)}(this,function(e,t,n){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,o){r.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){e.exports=n(133)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(2),i=n(3),a=r(i),s=n(8),u=r(s),c=n(20),l=r(c),p=n(26),f=r(p),d=n(127),h=r(d);e.exports={Editor:a["default"],Blocks:u["default"],uuid:o.uuid,BaseEmbed:l["default"],ScribeComponent:f["default"],MediumComponent:f["default"],DroppableComponent:h["default"],UrlRegex:o.UrlRegex}},function(e,t){"use strict";e.exports={uuid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+"-"+e()},UrlRegex:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(4),f=o(p),d=n(5),h=o(d),m=n(6),v=o(m),b=n(7),y=o(b),g=n(2),k=n(8),E=o(k),C=n(18),w=o(C),O=n(17),x=o(O),N=n(132),j=r(N),_="<p>==</p>",S=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.currentBlock=-1,n.handleBlockAction=n.handleBlockAction.bind(n),n.handleSplit=n.handleSplit.bind(n),n.getBlocks=n.getBlocks.bind(n),n.addBlock=n.addBlock.bind(n),n.addNewBlock=n.addNewBlock.bind(n),n.contentChange=n.contentChange.bind(n),n.getToolbar=n.getToolbar.bind(n),n.renderBlocks=n.renderBlocks.bind(n),n.splitBlock=n.splitBlock.bind(n),n.setCurrentBlock=n.setCurrentBlock.bind(n),n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleSplit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleSplit)}},{key:"handleSplit",value:function(e){e.which==x["default"].ESC?this.handleBlockAction(h["default"].REMOVE,this.currentBlock,!0):e.altKey&&e.ctrlKey&&e.which===x["default"].S&&(console.log("splitter"),this.splitBlock(this.currentBlock))}},{key:"setCurrentBlock",value:function(e){this.currentBlock=e}},{key:"splitBlock",value:function(e){var t=this.props.splitter,n=this.props.blocks,r=n[e];if(!(r.type!==E["default"].text.Name||r.data.indexOf(t)<0)){var o=r.data.split(t),i=[];o.forEach(function(e){""!==e&&i.push(e)}),n.splice(e,1);var a=e,s={};i.forEach(function(e){s={type:E["default"].text.Name,data:e,key:(0,g.uuid)()},n.splice(a++,0,s)}),this.props.onChange(n)}}},{key:"handleBlockAction",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.props.blocks,o=this.props.availableBlocks;if(e===h["default"].REMOVE){var i=o[r[t].type].isEmpty(r[t].data);if(n&&!i)return;if(!i&&!confirm("Are you sure?"))return;r.splice(t,1),this.currentBlock=t-1,-1===this.currentBlock&&r.length>0&&(this.currentBlock=0)}else e===h["default"].UP?(r.splice(t-1,2,r[t],r[t-1]),this.currentBlock=t-1):e===h["default"].DOWN&&(r.splice(t,2,r[t+1],r[t]),this.currentBlock=t+1);this.props.onChange(r)}},{key:"getBlocks",value:function(){return console.warn("This function will be deprecated in the next version."),this.props.blocks}},{key:"addNewBlock",value:function(e){var t=this.props.blocks,n=this.props.availableBlocks,r=j.addBlock(t,this.currentBlock,n,e,this.currentBlock,this.props.splitter);this.props.onChange(r)}},{key:"addBlock",value:function(e,t){var n=this.props.blocks;if(!(-1>t||t>n.length)){var r=this.props.blocks,o=this.props.availableBlocks;if(o[e]){if(0!==o[e].maximumBlocks){var i=function(){var t=0;return n.forEach(function(n,r){n.type===e&&t++}),t>=o[e].maximumBlocks?{v:void 0}:void 0}();if("object"===("undefined"==typeof i?"undefined":c(i)))return i.v}var a={type:e,data:o[e].Empty(),key:(0,g.uuid)()};r.splice(t+1,0,a),this.props.onChange(r)}}}},{key:"contentChange",value:function(e,t){var n=this.props.blocks;n[e].data=t,this.props.onChange(n)}},{key:"getToolbar",value:function(e){return f["default"].createElement(v["default"],{blockAction:this.handleBlockAction,position:e,className:"katap-control-toolbar katap-clearfix",length:this.props.blocks.length})}},{key:"renderBlocks",value:function(){var e=this,t=this.props.blocks,n=this.props.availableBlocks;if(t.length<1)return null;var r=t.map(function(t,r){var o=n[t.type].React;return n[t.type]?f["default"].createElement("div",{key:t.key,className:"katap-container"},e.getToolbar(r),f["default"].createElement(o,u({ref:"block"+r,position:r,content:t.data,addBlock:e.addBlock,onContentChanged:e.contentChange,UploadUrl:e.props.UploadUrl,EmbedTypes:e.props.EmbedTypes,splitBlock:e.splitBlock,setCurrentBlock:e.setCurrentBlock},e.props))):null});return r}},{key:"render",value:function(){return f["default"].createElement("div",{className:"katap-listing"},f["default"].createElement(y["default"],{ref:"toolbar",addBlock:this.addNewBlock,availableBlocks:this.props.availableBlocks}),this.renderBlocks())}}]),t}(f["default"].Component);t["default"]=S,S.defaultProps={availableBlocks:E["default"],EmbedTypes:w["default"],getBlocks:function(){return[]},UploadUrl:"",splitter:_}},function(t,n){t.exports=e},function(e,t){"use strict";e.exports={UP:"up",DOWN:"down",REMOVE:"remove"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(5),p=r(l),f=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.handleClick=n.handleClick.bind(n),n.getToolbar=n.getToolbar.bind(n),n}return a(t,e),s(t,[{key:"handleClick",value:function(e){var t=Array.prototype.slice.call(e.currentTarget.children),n=t.indexOf(e.target);if(!(0>n)){var r=t[n].getAttribute("data-action");this.props.blockAction(r,this.props.position)}}},{key:"getToolbar",value:function(e){if(this.props.onlyRemove)return c["default"].createElement("div",{className:this.props.className,onClick:this.handleClick},c["default"].createElement("button",{title:"Remove","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×"));var t=[];return 0===e&&this.props.length<2?t.push(c["default"].createElement("button",{title:"Delete","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")):0===e?(t.push(c["default"].createElement("button",{title:"Delete","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")),t.push(c["default"].createElement("button",{title:"Move Down","data-action":p["default"].DOWN,key:p["default"].DOWN},"↓"))):e===this.props.length-1?(t.push(c["default"].createElement("button",{title:"Delete","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")),t.push(c["default"].createElement("button",{title:"Move Up","data-action":p["default"].UP,key:p["default"].UP},"↑"))):(t.push(c["default"].createElement("button",{title:"Delete","data-action":p["default"].REMOVE,key:p["default"].REMOVE},"×")),t.push(c["default"].createElement("button",{title:"Move Up","data-action":p["default"].UP,key:p["default"].UP},"↑")),t.push(c["default"].createElement("button",{title:"Move Down","data-action":p["default"].DOWN,key:p["default"].DOWN},"↓"))),c["default"].createElement("div",{className:this.props.className,onClick:this.handleClick},t)}},{key:"render",value:function(){return this.getToolbar(this.props.position)}}]),t}(c["default"].Component);f.defaultProps={onlyRemove:!1,className:"katap-control-toolbar"},t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(5),p=(r(l),n(8)),f=r(p),d=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"render",value:function(){var e=this,t=this.props.availableBlocks;return c["default"].createElement("div",{className:"katap-toolbar"},Object.keys(t).map(function(n,r){return c["default"].createElement("button",{title:t[n].Description,key:n,onClick:function(){return e.props.addBlock(n)}},c["default"].createElement("i",{className:"fa fa-lg fa-"+t[n].Icon}))}))}}]),t}(c["default"].Component);d.defaultProps={availableBlocks:f["default"]},t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(9),i=r(o),a=n(25),s=r(a),u=n(125),c=r(u),l=n(126),p=r(l),f=n(128),d=r(f),h=n(130),m=r(h),v=n(124),b=r(v),y=n(131),g=r(y);e.exports={text:b["default"],image:p["default"],embed:i["default"],quote:m["default"],h2:s["default"],ol:d["default"],ul:g["default"],hr:c["default"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=f["default"].parse(e);return t.hostname}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),l=r(c),p=n(10),f=r(p),d=n(16),h=r(d),m=n(2),v=n(17),b=r(v),y=n(18),g=r(y),k={Name:"embed",Icon:"code",Empty:function(){return{url:"",subtext:""}},maximumBlocks:0,Description:"Embed",isEmpty:function(e){return""===e.url},EmbedTypes:g["default"]},E=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={loaded:!1,domain:"",url:"",className:""},n.getClassName=n.getClassName.bind(n),n.checkUrls=n.checkUrls.bind(n),n.handleUrl=n.handleUrl.bind(n),n.checkContent=n.checkContent.bind(n),n.renderBlock=n.renderBlock.bind(n),n.changeSubtext=n.changeSubtext.bind(n),n.onDrop=n.onDrop.bind(n),n.onDragEnter=n.onDragEnter.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){""===this.props.content.url&&this.refs.input.focus(),this.checkUrls(this.props.content.url,!0),this.setPosition()}},{key:"getClassName",value:function(){return"katap-block katap-embed "+(this.props.className||this.state.className)}},{key:"checkUrls",value:function(e,t){if(e.indexOf("http")<0&&(e="https://"+e),m.UrlRegex.test(e)){var n=s(e),r=this.props.EmbedTypes;for(var o in r)if(n.indexOf(o)>-1)return void this.setState({loaded:!0,domain:o,url:e});alert("This URL is not supported."),this.refs.input.value=""}else t||(alert("Enter a valid url"),this.refs.input.value="");m.UrlRegex.lastIndex=0}},{key:"handleUrl",value:function(e){e.keyCode===b["default"].ENTER&&this.checkUrls(e.target.value,!1)}},{key:"checkContent",value:function(e,t){if(e&&this.props.onContentChanged){var n=this.props.content;n.url=this.state.url,this.props.onContentChanged(this.props.position,n)}else alert(t)}},{key:"changeSubtext",value:function(e){if(this.props.onContentChanged){var t={url:this.props.content.url,subtext:e.target.value};this.props.onContentChanged(this.props.position,t)}}},{key:"onDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({className:"katap-embed-dragover"})}},{key:"onDragOver",value:function(e){return e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",!1}},{key:"onDrop",value:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),this.setState({className:""});var t=e.dataTransfer.getData("URL");""===t&&(t=e.dataTransfer.getData("text")),""!==t&&this.checkUrls(t,!1)}},{key:"onDragLeave",value:function(e){this.setState({className:"katap-block katap-embed"})}},{key:"renderBlock",value:function(){var e=this.props.EmbedTypes,t=e[this.state.domain];return l["default"].createElement(t,{url:this.state.url,checkContent:this.checkContent,content:this.props.content})}},{key:"render",value:function(){var e=this.props.content;return this.state.loaded?l["default"].createElement("div",{className:"katap-block katap-embed"},this.renderBlock(),l["default"].createElement("input",{type:"text",onFocus:this.onFocus,placeholder:"Embed subtext",onChange:this.changeSubtext,value:e.subtext})):l["default"].createElement("div",{className:this.getClassName(),onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.onFocus},l["default"].createElement("p",null,"Drop links here or paste below"),l["default"].createElement("input",{ref:"input",type:"text",placeholder:"Enter URL and press enter",onKeyUp:this.handleUrl,onFocus:this.onFocus}),l["default"].createElement("p",null,l["default"].createElement("span",null,"Supported embeds:"),Object.keys(this.props.EmbedTypes).map(function(e){return l["default"].createElement("span",{key:e,className:"katap-embed-name"},e)})))}}]),t}(h["default"]);E.defaultProps={EmbedTypes:g["default"]},k.React=E,t["default"]=k},function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&c(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}function i(e){return u(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function c(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function p(e){return null==e}var f=n(11);t.parse=o,t.resolve=a,t.resolveObject=s,t.format=i,t.Url=r;var d=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(m),b=["'"].concat(v),y=["%","/","?",";","#"].concat(b),g=["/","?","#"],k=255,E=/^[a-z0-9A-Z_-]{0,63}$/,C=/^([a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},N=n(13);r.prototype.parse=function(e,t,n){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var o=d.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||o&&O[o]||(r=r.substr(2),this.slashes=!0)}if(!O[o]&&(a||o&&!x[o])){for(var s=-1,c=0;c<g.length;c++){var l=r.indexOf(g[c]);-1!==l&&(-1===s||s>l)&&(s=l)}var p,h;h=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==h&&(p=r.slice(0,h),r=r.slice(h+1),this.auth=decodeURIComponent(p)),s=-1;for(var c=0;c<y.length;c++){var l=r.indexOf(y[c]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),c=0,j=v.length;j>c;c++){var _=v[c];if(_&&!_.match(E)){for(var S="",T=0,P=_.length;P>T;T++)S+=_.charCodeAt(T)>127?"x":_[T];if(!S.match(E)){var M=v.slice(0,c),L=v.slice(c+1),R=_.match(C);R&&(M.push(R[1]),L.unshift(R[2])),L.length&&(r="/"+L.join(".")+r),this.hostname=M.join(".");break}}}if(this.hostname.length>k?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var B=this.hostname.split("."),A=[],c=0;c<B.length;++c){var D=B[c];A.push(D.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(D):D)}this.hostname=A.join(".")}var I=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+I,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!w[i])for(var c=0,j=b.length;j>c;c++){var U=b[c],q=encodeURIComponent(U);q===U&&(q=escape(U)),r=r.split(U).join(q)}var H=r.indexOf("#");-1!==H&&(this.hash=r.substr(H),r=r.slice(0,H));var K=r.indexOf("?");if(-1!==K?(this.search=r.substr(K),this.query=r.substr(K+1),t&&(this.query=N.parse(this.query)),r=r.slice(0,K)):t&&(this.search="",this.query={}),r&&(this.pathname=r),x[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",D=this.search||"";this.path=I+D}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=N.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||x[t])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),x[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!x[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||O[e.protocol])n.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var i=n.pathname||"",a=n.search||"";n.path=i+a}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=c||s||n.host&&e.pathname,d=f,h=n.pathname&&n.pathname.split("/")||[],o=e.pathname&&e.pathname.split("/")||[],m=n.protocol&&!x[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===h[0]?h[0]=n.host:h.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),f=f&&(""===o[0]||""===h[0])),c)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,h=o;else if(o.length)h||(h=[]),h.pop(),h=h.concat(o),n.search=e.search,n.query=e.query;else if(!p(e.search)){if(m){n.hostname=n.host=h.shift();var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!h.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var b=h.slice(-1)[0],y=(n.host||e.host)&&("."===b||".."===b)||""===b,g=0,k=h.length;k>=0;k--)b=h[k],"."==b?h.splice(k,1):".."===b?(h.splice(k,1),g++):g&&(h.splice(k,1),g--);if(!f&&!d)for(;g--;g)h.unshift("..");!f||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift(""),y&&"/"!==h.join("/").substr(-1)&&h.push("");var E=""===h[0]||h[0]&&"/"===h[0].charAt(0);if(m){n.hostname=n.host=E?"":h.length?h.shift():"";var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return f=f||n.host&&h.length,f&&!E&&h.unshift(""),h.length?n.pathname=h.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,o){!function(i){function a(e){throw RangeError(M[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(P,".");var o=e.split("."),i=s(o,t).join(".");return r+i}function c(e){for(var t,n,r=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function p(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function f(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?R(e/x):e>>1,e+=R(e/t);e>L*w>>1;r+=E)e=R(e/L);return R(r+(L+1)*e/(e+O))}function h(e){var t,n,r,o,i,s,u,c,f,h,m=[],v=e.length,b=0,y=j,g=N;for(n=e.lastIndexOf(_),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;v>o;){for(i=b,s=1,u=E;o>=v&&a("invalid-input"),c=p(e.charCodeAt(o++)),(c>=E||c>R((k-b)/s))&&a("overflow"),b+=c*s,f=g>=u?C:u>=g+w?w:u-g,!(f>c);u+=E)h=E-f,s>R(k/h)&&a("overflow"),s*=h;t=m.length+1,g=d(b-i,t,0==i),R(b/t)>k-y&&a("overflow"),y+=R(b/t),b%=t,m.splice(b++,0,y)}return l(m)}function m(e){var t,n,r,o,i,s,u,l,p,h,m,v,b,y,g,O=[];for(e=c(e),v=e.length,t=j,n=0,i=N,s=0;v>s;++s)m=e[s],128>m&&O.push(B(m));for(r=o=O.length,o&&O.push(_);v>r;){for(u=k,s=0;v>s;++s)m=e[s],m>=t&&u>m&&(u=m);for(b=r+1,u-t>R((k-n)/b)&&a("overflow"),n+=(u-t)*b,t=u,s=0;v>s;++s)if(m=e[s],t>m&&++n>k&&a("overflow"),m==t){for(l=n,p=E;h=i>=p?C:p>=i+w?w:p-i,!(h>l);p+=E)g=l-h,y=E-h,O.push(B(f(h+g%y,0))),l=R(g/y);O.push(B(f(l,0))),i=d(n,b,r==o),n=0,++r}++n,++t}return O.join("")}function v(e){return u(e,function(e){return S.test(e)?h(e.slice(4).toLowerCase()):e})}function b(e){return u(e,function(e){return T.test(e)?"xn--"+m(e):e})}var y=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof o&&o);y.global!==y&&y.window!==y&&y.self!==y||(i=y);var g,k=2147483647,E=36,C=1,w=26,O=38,x=700,N=72,j=128,_="-",S=/^xn--/,T=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=E-C,R=Math.floor,B=String.fromCharCode;g={version:"1.3.2",ucs2:{decode:c,encode:l},decode:h,encode:m,toASCII:b,toUnicode:v},r=function(){return g}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(12)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";t.decode=t.parse=n(14),t.encode=t.stringify=n(15)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;u>c;++c){var l,p,f,d,h=e[c].replace(a,"%20"),m=h.indexOf(r);m>=0?(l=h.substr(0,m),p=h.substr(m+1)):(l=h,p=""),f=decodeURIComponent(l),d=decodeURIComponent(p),n(i,f)?Array.isArray(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.setPosition=n.setPosition.bind(n),n.onContentChanged=n.onContentChanged.bind(n),n.onFocus=n.onFocus.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.setPosition()}},{key:"componentWillUnmount",value:function(){this.props.setCurrentBlock(this.props.position-1)}},{key:"setPosition",value:function(){this.props.setCurrentBlock(this.props.position)}},{key:"onContentChanged",value:function(e){this.props.onContentChanged&&this.props.onContentChanged(this.props.position,e)}},{key:"onFocus",value:function(){this.setPosition()}},{key:"render",value:function(){return c["default"].createElement("div",{className:"katap-block katap-base"},"Base Block. Extend this block to make your own.")}}]),t}(c["default"].Component);t["default"]=l},function(e,t){"use strict";e.exports={ENTER:13,ESC:27,BACKSPACE:8,S:83}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(19),i=r(o),a=n(21),s=r(a),u=n(22),c=r(u),l=n(23),p=r(l),f=n(24),d=r(f);e.exports={youtube:i["default"],instagram:p["default"],vimeo:s["default"],vine:c["default"],facebook:d["default"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(20),p=r(l),f=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return this.state.valid?this.state.preview?c["default"].createElement("div",{className:"katap-embed katap-youtube"},c["default"].createElement("iframe",{src:"//youtube.com/embed/"+this.state.id,frameBorder:0,width:580,height:320,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed katap-youtube"
},c["default"].createElement("p",null,"Youtube Video - ",c["default"].createElement("a",{href:this.props.url,target:"_blank"},this.props.url)),c["default"].createElement("button",{className:"katap-show-preview-btn",onClick:this.showPreview},"Preview")):c["default"].createElement("div",{className:"katap-embed"},"Invalid Youtube URL.")}}]),t}(p["default"]);f.defaultProps={url:"",regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/},t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={message:"Wait",id:"",valid:!1,preview:!1},n.validate=n.validate.bind(n),n.extraHandler=n.extraHandler.bind(n),n.showPreview=n.showPreview.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.validate(),this.extraHandler()}},{key:"extraHandler",value:function(){}},{key:"showPreview",value:function(){this.setState({preview:!this.state.preview})}},{key:"validate",value:function(){var e;return e=this.props.regex.exec(this.props.url),this.props.regex.lastIndex=0,e?(this.setState({message:"OK.",id:e[1],valid:!0}),void this.props.checkContent(!0)):(this.props.checkContent(!1),void this.setState({message:"error."}))}},{key:"render",value:function(){return c["default"].createElement("div",{"class":"katap-embed"})}}]),t}(c["default"].Component);l.defaultProps={url:"",regex:/^$/},t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(20),p=r(l),f=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return this.state.valid?this.state.preview?c["default"].createElement("div",{className:"katap-embed katap-vimeo"},c["default"].createElement("iframe",{src:"//player.vimeo.com/video/"+this.state.id,frameBorder:0,width:580,height:320,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed katap-vimeo"},c["default"].createElement("p",null,"Vimeo - ",c["default"].createElement("a",{href:this.props.url,target:"_blank"},this.props.url)),c["default"].createElement("button",{className:"katap-show-preview-btn",onClick:this.showPreview},"Preview")):c["default"].createElement("div",{className:"katap-embed"},"Invalid Vimeo URL.")}}]),t}(p["default"]);f.defaultProps={url:"",regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/},t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(20),p=r(l),f=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.loadExternalScript=n.loadExternalScript.bind(n),n}return a(t,e),s(t,[{key:"loadExternalScript",value:function(){var e=this.props.scriptUrl,t=document.createElement("script");t.src=e,t.async=1,window.document.body.appendChild(t)}},{key:"extraHandler",value:function(){this.loadExternalScript()}},{key:"render",value:function(){return this.state.valid?this.state.preview?c["default"].createElement("div",{className:"katap-embed katap-vine"},c["default"].createElement("iframe",{className:"vine-embed",src:"//vine.co/v/"+this.state.id+"/embed/postcard",frameBorder:0,width:600,height:600,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed katap-vine"},c["default"].createElement("p",null,"Vine - ",c["default"].createElement("a",{href:this.props.url,target:"_blank"},this.props.url)),c["default"].createElement("button",{className:"katap-show-preview-btn",onClick:this.showPreview},"Preview")):c["default"].createElement("div",{className:"katap-embed"},"Invalid Vimeo URL.")}}]),t}(p["default"]);f.defaultProps={regex:/https?:\/\/vine\.co\/v\/([a-zA-Z0-9].*)\/?/,scriptUrl:"//platform.vine.co/static/scripts/embed.js"},t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(20),p=r(l),f=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return this.state.valid?this.state.preview?c["default"].createElement("div",{className:"katap-embed katap-instagram"},c["default"].createElement("iframe",{src:"//instagram.com/p/"+this.state.id+"/embed",frameBorder:0,allowFullScreen:!0})):c["default"].createElement("div",{className:"katap-embed katap-instagram"},c["default"].createElement("p",null,"Instagram - ",c["default"].createElement("a",{href:this.props.url,target:"_blank"},this.props.url)),c["default"].createElement("button",{className:"katap-show-preview-btn",onClick:this.showPreview},"Preview")):c["default"].createElement("div",{className:"katap-embed"},"Invalid Instagram URL.")}}]),t}(p["default"]);f.defaultProps={url:"",regex:/https?:\/\/(?:www\.){0,1}instagram\.com\/p\/([^\/]+)\/?.*/gi},t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(20),p=r(l),f=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={message:"Wait",id:"",valid:!1,html:""},n.validate=n.validate.bind(n),n.loadExternalScript=n.loadExternalScript.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.validate()}},{key:"showPreview",value:function(){this.setState({preview:!this.state.preview}),this.loadExternalScript()}},{key:"loadExternalScript",value:function(){if(window.FB&&window.FB.init)return void window.FB.init({xfbml:!0,version:"v2.3"});var e=document.createElement("script");e.src=this.props.scriptUrl,e.async=1,window.document.body.appendChild(e)}},{key:"validate",value:function(){var e;if(e=this.props.regex.exec(this.props.url),this.props.regex.lastIndex=0,!e)return this.props.checkContent(!1),void this.setState({message:"error."});var t='<div class="fb-post" data-href="'+this.props.url+'" data-width="750"></div>';this.props.url.indexOf("/videos/")>0&&(t='<div class="fb-video" data-href="'+this.props.url+'" data-allowfullscreen="true" data-width="750"></div>'),this.setState({message:"Loading Facebook embed...",id:e[1],valid:!0,html:t}),this.props.checkContent(!0)}},{key:"render",value:function(){return this.state.valid?this.state.preview?c["default"].createElement("div",{className:"katap-embed katap-facebook",dangerouslySetInnerHTML:{__html:this.state.html}}):c["default"].createElement("div",{className:"katap-embed katap-facebook"},c["default"].createElement("p",null,"Facebook - ",c["default"].createElement("a",{href:this.props.url,target:"_blank"},this.props.url)),c["default"].createElement("button",{className:"katap-show-preview-btn",onClick:this.showPreview},"Preview")):c["default"].createElement("div",{className:"katap-embed katap-twitter"},"This fb URL is not supported.")}}]),t}(p["default"]);f.defaultProps={url:"",regex:/https?:\/\/www\.facebook\.com\/(?:.*)\/(videos|posts|photos)\/(\d+).*/gi,scriptUrl:"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3"},t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(26),p=r(l),f=n(123),d=n(124),h=r(d),m=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"captureReturn",value:function(){this.props.addBlock("text",this.props.position)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"katap-block katap-h2"},c["default"].createElement(p["default"],{options:f.baseInlineOptions,content:this.props.content,enterCapture:!0,captureReturn:this.captureReturn,onFocus:this.onFocus,onContentChanged:this.onContentChanged}))}}]),t}(h["default"].React),v={Name:"h2",React:m,Icon:"header",Empty:function(){return"<p><br></p>"},maximumBlocks:0,Description:"Heading",isEmpty:function(e){return""===e.replace(/(<([^>]+)>)/gi,"")}};t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(27),p=r(l),f=n(28),d=r(f),h=n(74),m=r(h),v=n(78),b=r(v),y=n(119),g=r(y),k=n(120),E=r(k),C=n(121),w=r(C),O=n(122),x=n(17),N=r(x),j=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={showToolbar:!1,showLinkInput:!1,placeholder:!0},n.scribe=null,n.dom=null,n._updated=!1,n.tempRange=null,n.placeCaretAtEnd=n.placeCaretAtEnd.bind(n),n.captureReturn=n.captureReturn.bind(n),n.handleCommand=n.handleCommand.bind(n),n.onSelect=n.onSelect.bind(n),n._onSelect=n._onSelect.bind(n),n.handleLink=n.handleLink.bind(n),n.onBlur=function(){n.state.showLinkInput||n.setState({showToolbar:!1,showLinkInput:!1})},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;this.dom=p["default"].findDOMNode(this.refs.scribeeditor),this.scribe=new d["default"](this.dom),this.props.inline||this.scribe.use((0,w["default"])()),this.scribe.use((0,O.linkCommand)()),this.scribe.use((0,g["default"])()),this.scribe.use((0,m["default"])()),this.scribe.use((0,b["default"])(this.props.options)),this.scribe.use((0,E["default"])()),(this.props.inline||this.props.enterCapture)&&this.scribe.el.addEventListener("keydown",this.captureReturn),this.scribe.on("scribe:content-changed",function(){(0,O.isEditorEmpty)(e.scribe)?e.state.placeholder||e.setState({placeholder:!0}):e.state.placeholder&&e.setState({placeholder:!1}),e.props.onContentChanged(e.scribe.getHTML())}),this.scribe.setContent(this.props.content),this.props.onFocus&&this.scribe.el.addEventListener("focus",this.props.onFocus),this.scribe.el.addEventListener("blur",this.onBlur),this.placeCaretAtEnd(),window.scribe=this.scribe}},{key:"componentWillUnmount",value:function(){(this.props.inline||this.props.enterCapture)&&this.scribe.el.removeEventListener("keydown",this.captureReturn),this.scribe.el.removeEventListener("focus",this.props.onFocus),this.scribe.el.removeEventListener("blur",this.onBlur),this.scribe.destroy(),this.dom=null,this.scribe=null,this.tempRange=null}},{key:"componentWillReceiveProps",value:function(e){this._updated&&(this._updated=!1)}},{key:"shouldComponentUpdate",value:function(e,t){return t.showToolbar!==this.state.showToolbar||t.showLinkInput!==this.state.showLinkInput||t.placeholder!=this.state.placeholder}},{key:"componentDidUpdate",value:function(){if(this.state.showToolbar){var e=this.refs.toolbar,t=e.getBoundingClientRect(),n=window.getSelection(),r=n.getRangeAt(0),o=r.getBoundingClientRect(),i=this.dom,a=i.getBoundingClientRect();e.style.top=o.top-a.top-t.height-5+"px";var s=o.width-t.width;if(s>=0)e.style.left=s/2+"px";else{var u=o.left-a.left;u+t.width>a.width?e.style.right="0px":e.style.left=u+s/2+"px"}}}},{key:"placeCaretAtEnd",value:function(){var e=this.dom;if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var r=document.body.createTextRange();r.moveToElementText(e),r.collapse(!1),r.select()}}},{key:"captureReturn",value:function(e){e.which==N["default"].ENTER&&((this.props.inline||this.props.enterCapture)&&e.preventDefault(),this.props.captureReturn&&this.props.captureReturn())}},{key:"_onSelect",value:function(e){var t=window.getSelection(),n=t.toString();n.length<1?this.state.showToolbar&&this.setState({showToolbar:!1,showLinkInput:!1}):this.setState({showToolbar:!0,showLinkInput:!1})}},{key:"onSelect",value:function(e){var t=this;setTimeout(function(){t._onSelect(e)},0)}},{key:"handleLink",value:function(e){var t=this;if(e.which===N["default"].ESC)e.stopPropagation(),this.setState({showLinkInput:!1,showToolbar:!0},function(){var e=new t.scribe.api.Selection;t.scribe.el.focus(),e.selection.removeAllRanges(),e.selection.addRange(t.tempRange)});else if(e.which===N["default"].ENTER){e.preventDefault(),e.stopPropagation();var n=e.target.value,r=new this.scribe.api.Selection;if(this.scribe.el.focus(),r.selection.removeAllRanges(),r.selection.addRange(this.tempRange),n.length<1){var o=this.scribe.getCommand("unlink");o.execute("unlink"),this.setState({showLinkInput:!1,showToolbar:!0})}else{var i=this.scribe.getCommand("setLink");i.execute(n),this.setState({showLinkInput:!1,showToolbar:!0})}}}},{key:"handleCommand",value:function(e){var t=this;if("link"===e)this.state.showLinkInput?this.setState({showLinkInput:!1,showToolbar:!0}):!function(){var e=t.scribe.getCommand("setLink"),n=e.getCurrentLink();t.setState({showLinkInput:!0,showToolbar:!0},function(){t.tempRange=(new t.scribe.api.Selection).range,setTimeout(function(){t.refs.linkinput.focus(),t.refs.linkinput.value=n},0)})}();else{var n=this.scribe.getCommand(e);n.execute(e)}}},{key:"render",value:function(){var e=this;return c["default"].createElement("div",{className:"katap-scribe-container"},this.state.showToolbar?c["default"].createElement("div",{className:"katap-scribe-toolbar",ref:"toolbar"},this.state.showLinkInput?c["default"].createElement("input",{ref:"linkinput",type:"text",className:"katap-scribe-link-input",placeholder:"Paste and ENTER",onKeyDown:this.handleLink}):O.toolbarButtons.map(function(t){return c["default"].createElement("button",{key:t.command,title:t.command,onMouseDown:function(){return e.handleCommand(t.command)}},c["default"].createElement("i",{className:"fa fa-"+t.icon}))})):null,c["default"].createElement("div",{ref:"scribeeditor",className:"katap-medium-editor markdown-body",options:this.props.options,onKeyUp:this.onSelect,onMouseUp:this.onSelect,contentEditable:!0}),this.state.placeholder?c["default"].createElement("div",{className:"scribe-plugin-placeholder",style:{top:0,left:2}},this.props.placeholder):null)}}]),t}(c["default"].Component);t["default"]=j,j.defaultProps={options:O.baseOptions,inline:!1,placeholder:"Write your story..."}},function(e,n){e.exports=t},function(e,t,n){var r,o;r=[n(31),n(63),n(39),n(45),n(48),n(56),n(61),n(29),n(72),n(35),n(30),n(73),n(62)],o=function(e,t,n,r,o,i,a,s,u,c,l,p,f){"use strict";function d(c,f){u.call(this),this.el=c,this.commands={},this.options=p.checkOptions(f),this.commandPatches={},this._plainTextFormatterFactory=new h,this._htmlFormatterFactory=new m,this.api=new i(this),this.Immutable=l;var d=a(this);this.transactionManager=new d,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new s(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1);var v=l.OrderedSet(this.options.defaultPlugins).sort(p.sortByPlugin("setRootPElement")).filter(p.filterByBlockLevelMode(this.allowsBlockElements())).map(function(t){return e[t]}),b=l.List(this.options.defaultFormatters).filter(function(e){return!!n[e]}).map(function(e){return n[e]}),y=l.List.of(o.events),g=l.List(this.options.defaultCommandPatches).map(function(e){return o.commands[e]}),k=l.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(e){return t[e]}),E=l.List().concat(v,b,y,g,k);E.forEach(function(e){this.use(e())}.bind(this)),this.use(r())}function h(){this.formatters=l.List()}function m(){this.formatters={sanitize:l.List(),normalize:l.List(),"export":l.List()}}return d.prototype=Object.create(u.prototype),d.prototype.node=c,d.prototype.element=d.prototype.node,d.prototype.use=function(e){return e(this),this},d.prototype.setHTML=function(e,t){this.options.undo.enabled&&(this._lastItem.content=e),t&&(this._skipFormatters=!0),this.el.innerHTML!==e&&(this.el.innerHTML=e)},d.prototype.getHTML=function(){return this.el.innerHTML},d.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},d.prototype.getTextContent=function(){return this.el.textContent},d.prototype.pushHistory=function(){var e=this;if(e.options.undo.enabled){var t=e._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(e.getHTML()!==t){var n=new e.api.Selection;n.placeMarkers();var r=e.getHTML();n.removeMarkers();var o=e.undoManager.item(e.undoManager.position);return(e._merge||e._forceMerge)&&o&&e._lastItem==o[0]?e._lastItem.content=r:(e._lastItem={previousItem:e._lastItem,content:r,scribe:e,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},e.undoManager.transact(e._lastItem,!1)),clearTimeout(e._mergeTimer),e._merge=!0,e._mergeTimer=setTimeout(function(){e._merge=!1},e.options.undo.interval),!0}}return!1},d.prototype.getCommand=function(e){return this.commands[e]||this.commandPatches[e]||new this.api.Command(e)},d.prototype.restoreFromHistory=function(e){this._lastItem=e,this.setHTML(e.content,!0);var t=new this.api.Selection;t.selectMarkers(),this.trigger(f.legacyContentChanged),this.trigger(f.contentChanged)},d.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},d.prototype.setContent=function(e){this.allowsBlockElements()||(e+="<br>"),this.setHTML(e),this.trigger(f.legacyContentChanged),this.trigger(f.contentChanged)},d.prototype.insertPlainText=function(e){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(e)+"</p>")},d.prototype.insertHTML=function(e){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(e))},d.prototype.isDebugModeEnabled=function(){return this.options.debug},d.prototype.registerHTMLFormatter=function(e,t){this._htmlFormatterFactory.formatters[e]=this._htmlFormatterFactory.formatters[e].push(t)},d.prototype.registerPlainTextFormatter=function(e){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(e)},d.prototype.destroy=function(e){this.trigger(f.destroy)},h.prototype.format=function(e){var t=this.formatters.reduce(function(e,t){return t(e)},e);return t},m.prototype=Object.create(h.prototype),m.prototype.constructor=m,m.prototype.format=function(e){var t=this.formatters.sanitize.concat(this.formatters.normalize),n=t.reduce(function(e,t){return t(e)},e);return n},m.prototype.formatForExport=function(e){return this.formatters["export"].reduce(function(e,t){return t(e)},e)},d}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(30)],o=function(e){"use strict";function t(t,n){this._stack=e.List(),this._limit=t,this._fireEvent="undefined"!=typeof CustomEvent&&n&&n.dispatchEvent,this._ush=n,this.position=0,this.length=0}return t.prototype.transact=function(t,n){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");t.execute(),this.position>0&&this.clearRedo();var r;n&&this.length?(r=this._stack.first().push(t),this._stack=this._stack.shift().unshift(r)):(r=e.List.of(t),this._stack=this._stack.unshift(r),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",r)},t.prototype.undo=function(){if(!(this.position>=this.length)){for(var e=this._stack.get(this.position),t=e.size;t--;)e.get(t).undo();this.position++,this._dispatch("undo",e)}},t.prototype.redo=function(){if(0!==this.position){this.position--;for(var e=this._stack.get(this.position),t=0;t<e.size;t++)e.get(t).redo();this._dispatch("redo",e)}},t.prototype.item=function(e){return e>=0&&e<this.length?this._stack.get(e).toArray():null},t.prototype.clearUndo=function(e){this._stack=this._stack.take(void 0!==e?e:this.position),this.length=this._stack.size},t.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},t.prototype._dispatch=function(e,t){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(e,{detail:{transactions:t.toArray()},bubbles:!0,cancelable:!1}))},t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t){e.exports=n},function(e,t,n){var r,o;r=[n(32),n(33),n(34),n(38)],o=function(e,t,n,r){"use strict";return{setRootPElement:e,enforcePElements:t,ensureSelectableContainers:n,inlineElementsMode:r}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){""===e.getHTML().trim()&&e.setContent("<p><br></p>")}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[n(30)],o=function(e){"use strict";return function(){return function(t){function n(t){var n=0;e.List(t.childNodes).filterNot(function(e){return o.isWhitespaceOnlyTextNode(Node,e)}).filter(function(e){return e.nodeType===Node.TEXT_NODE||!o.isBlockElement(e)}).groupBy(function(e,t,r){return 0===t||e.previousSibling===r.get(t-1)?n:n+=1}).forEach(function(e){o.wrap(e.toArray(),document.createElement("p"))})}function r(e){for(var t,r=0;t=e.children[r++];)"BLOCKQUOTE"===t.tagName&&n(t)}var o=t.node;t.registerHTMLFormatter("normalize",function(e){var t=document.createElement("div");return t.innerHTML=e,n(t),r(t),t.innerHTML})}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(35),n(30)],o=function(e,t){"use strict";function n(t){return e.isCaretPositionNode(t)?!0:""===t.parentNode.textContent.trim()}function r(t){function i(t){return 0===t.children.length&&e.isBlockElement(t)||1===t.children.length&&e.isSelectionMarkerNode(t.children[0])?!0:e.isBlockElement(t)||0!==t.children.length?!1:n(t)}for(var a=t.firstElementChild;a;)e.isSelectionMarkerNode(a)||(i(a)&&""===a.textContent.trim()&&!o.includes(a.nodeName)?a.appendChild(document.createElement("br")):a.children.length>0&&r(a)),a=a.nextElementSibling}var o=t.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(e){e.registerHTMLFormatter("normalize",function(e){var t=document.createElement("div");return t.innerHTML=e,r(t),t.innerHTML})}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(36),n(37),n(30)],o=function(e,t,n){"use strict";function r(e){return t.includes(e.nodeName)}function o(t){return e.includes(t.nodeName)}function i(e){return e&&e.children&&e.children.length>0?!0:!(!e||"BR"!==e.nodeName)}function a(e){return e.children.length>1?!1:1===e.children.length&&""!==e.textContent.trim()?!1:0===e.children.length?""===e.textContent.trim():a(e.children[0])}function s(e){return e.nodeType===Node.TEXT_NODE}function u(e){return s(e)&&""===e.data}function c(e){return e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function l(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING}function p(e,t){return function(n){return n.nodeType===e.ELEMENT_NODE&&n.className===t}}function f(e){return p(Node,"scribe-marker")(e)}function d(e){return p(Node,"caret-position")(e)}function h(e,t){return!(t.nodeType!==e.TEXT_NODE||!/^\s*$/.test(t.nodeValue))}function m(e){var t=e.firstChild;return t&&"BR"!==t.nodeName?m(t):e}function v(e,t){return t.parentNode.insertBefore(e,t.nextSibling)}function b(e){return e.parentNode.removeChild(e)}function y(e,t,n){function r(e){return t===e}if(!r(e))for(var o=e.parentNode;o&&!r(o);){if(n(o))return o;o=o.parentNode}}function g(e){for(var t=n.List();e=e.nextSibling;)t=t.push(e);return t}function k(e,t){return e[0].parentNode.insertBefore(t,e[0]),e.forEach(function(e){t.appendChild(e)}),t}function E(e,t){for(;t.childNodes.length>0;)e.insertBefore(t.childNodes[0],t);e.removeChild(t)}function C(t){function r(e,t){return window.getComputedStyle(t).lineHeight===e.lineHeight}var o=n.List(t.querySelectorAll(e.map(function(e){return e+'[style*="line-height"]'}).join(",")));o=o.filter(r.bind(null,window.getComputedStyle(t)));var i=n.List();o.forEach(function(e){e.style.lineHeight=null,""===e.getAttribute("style")&&e.removeAttribute("style"),"SPAN"===e.nodeName&&0===e.attributes.length&&(i=i.push(e))}),i.forEach(function(e){E(e.parentNode,e)})}return{isInlineElement:o,isBlockElement:r,isEmptyInlineElement:a,isText:s,isEmptyTextNode:u,isWhitespaceOnlyTextNode:h,isFragment:c,isBefore:l,isSelectionMarkerNode:f,isCaretPositionNode:d,firstDeepestChild:m,insertAfter:v,removeNode:b,getAncestor:y,nextSiblings:g,wrap:k,unwrap:E,removeChromeArtifacts:C,elementHasClass:p,hasContent:i}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(30)],o=function(e){var t=e.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA");return t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(30)],o=function(e){var t=e.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO");return t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(35)],o=function(e){"use strict";function t(t){for(var n=document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1);n.nextNode();)if(n.currentNode&&e.hasContent(n.currentNode))return!0;return!1}return function(){return function(e){e.el.addEventListener("keydown",function(n){if(13===n.keyCode){var r=new e.api.Selection,o=r.range,i=r.getContaining(function(e){return"LI"===e.nodeName||/^(H[1-6])$/.test(e.nodeName)});i||(n.preventDefault(),e.transactionManager.run(function(){"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var n=document.createElement("br");o.insertNode(n),o.collapse(!1);var i=o.cloneRange();i.setEndAfter(e.el.lastChild);var a=i.cloneContents();if(!t(a)){var s=document.createElement("br");o.insertNode(s)}var u=o.cloneRange();u.setStartAfter(n),u.setEndAfter(n),
r.selection.removeAllRanges(),r.selection.addRange(u)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(40),n(41)],o=function(e,t){"use strict";return{replaceNbspCharsFormatter:e,escapeHtmlCharactersFormatter:t}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=/(\s|&nbsp;)+/g;e.registerHTMLFormatter("export",function(e){return e.replace(t," ")})}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[n(42)],o=function(e){"use strict";return function(){return function(t){t.registerPlainTextFormatter(e)}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(43),n(44)],o=function(e,t){function n(n){return n=e(n),n&&o.test(n)?n.replace(r,t):n}var r=/[&<>"'`]/g,o=RegExp(r.source);return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return null==e?"":e+""}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return t[e]}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(46),n(30)],o=function(e,t){"use strict";return function(){return function(n){var r=n.node;n.el.addEventListener("focus",function(){var e=new n.api.Selection;if(e.range){var t=n.allowsBlockElements()&&e.range.startContainer===n.el;if(t){var o=r.firstDeepestChild(n.el),i=e.range;i.setStart(o,0),i.setEnd(o,0),e.selection.removeAllRanges(),e.selection.addRange(i)}}}.bind(n));var o=function(){if(!n._skipFormatters){var e=new n.api.Selection,t=e.range,r=function(){t&&e.placeMarkers(),n.setHTML(n._htmlFormatterFactory.format(n.getHTML())),e.selectMarkers()}.bind(n);n.transactionManager.run(r)}delete n._skipFormatters}.bind(n);e(n.el,o),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(e){if(13===e.keyCode){var t=new n.api.Selection,r=t.range,o=t.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});if(o&&r.collapsed){var i=r.cloneRange();i.setEndAfter(o);var a=i.cloneContents();""===a.firstChild.textContent&&(e.preventDefault(),n.transactionManager.run(function(){var e=document.createElement("p"),n=document.createElement("br");e.appendChild(n),o.parentNode.insertBefore(e,o.nextElementSibling),r.setStart(e,0),r.setEnd(e,0),t.selection.removeAllRanges(),t.selection.addRange(r)}))}}}),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(e){if(13===e.keyCode||8===e.keyCode){var t=new n.api.Selection,r=t.range;if(r.collapsed){var o=t.getContaining(function(e){return"LI"===e.nodeName});if(o&&""===o.textContent.trim()){e.preventDefault();var i=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName}),a=n.getCommand("OL"===i.nodeName?"insertOrderedList":"insertUnorderedList");a.event=e,a.execute()}}}}),n.el.addEventListener("paste",function(e){if(e.clipboardData&&e.clipboardData.types.length>0)e.preventDefault(),t.List(e.clipboardData.types).includes("text/html")?n.insertHTML(e.clipboardData.getData("text/html")):n.insertPlainText(e.clipboardData.getData("text/plain"));else{var r=new n.api.Selection;r.placeMarkers();var o=document.createElement("div");document.body.appendChild(o),o.setAttribute("contenteditable",!0),o.focus(),setTimeout(function(){var e=o.innerHTML;o.parentNode.removeChild(o),r.selectMarkers(),n.el.focus(),n.insertHTML(e)},1)}})}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(35),n(47)],o=function(e,t){function n(t){return!e.isEmptyTextNode(t)&&!e.isSelectionMarkerNode(t)}function r(e){return e.some(function(e){return Array.prototype.some.call(e.addedNodes,n)||Array.prototype.some.call(e.removedNodes,n)})}function o(e,t){var n=!1,o=new a(function(e){if(!n&&r(e)){n=!0;try{t()}catch(o){throw o}finally{setTimeout(function(){n=!1},0)}}});return o.observe(e,{childList:!0,subtree:!0}),o}var i="object"==typeof window?window:void 0,a=t.determineMutationObserver(i);return o}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return"undefined"==typeof e?function(){return{observe:function(){}}}:e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver}return{determineMutationObserver:e}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(49),n(50),n(51),n(52),n(53),n(54),n(55)],o=function(e,t,n,r,o,i,a){"use strict";return{commands:{bold:e,indent:t,insertHTML:n,insertList:r,outdent:o,createLink:i},events:a}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=new e.api.CommandPatch("bold");t.queryEnabled=function(){var t=new e.api.Selection,n=t.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});return e.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!n},e.commandPatches.bold=t}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";var e="\ufeff";return function(){return function(t){var n=new t.api.CommandPatch("indent");n.execute=function(n){t.transactionManager.run(function(){var r=new t.api.Selection,o=r.range,i="P"===o.commonAncestorContainer.nodeName&&"<br>"===o.commonAncestorContainer.innerHTML;if(i){var a=document.createTextNode(e);o.insertNode(a),o.setStart(a,0),o.setEnd(a,0),r.selection.removeAllRanges(),r.selection.addRange(o)}t.api.CommandPatch.prototype.execute.call(this,n),r=new t.api.Selection;var s=r.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});s&&s.removeAttribute("style")}.bind(this))},t.commandPatches.indent=n}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[],o=function(){"use strict";return function(){return function(e){var t=new e.api.CommandPatch("insertHTML"),n=e.node;t.execute=function(t){e.transactionManager.run(function(){e.api.CommandPatch.prototype.execute.call(this,t),n.removeChromeArtifacts(e.el)}.bind(this))},e.commandPatches.insertHTML=t}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){"use strict";return function(){return function(e){var t=e.node,n=function(t){e.api.CommandPatch.call(this,t)};n.prototype=Object.create(e.api.CommandPatch.prototype),n.prototype.constructor=n,n.prototype.execute=function(n){e.transactionManager.run(function(){if(e.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var r=new e.api.Selection,o=r.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName});if(o.nextElementSibling&&0===o.nextElementSibling.childNodes.length&&t.removeNode(o.nextElementSibling),o){var i=o.parentNode;i&&/^(H[1-6]|P)$/.test(i.nodeName)&&(r.placeMarkers(),t.insertAfter(o,i),r.selectMarkers(),2===i.childNodes.length&&t.isEmptyTextNode(i.firstChild)&&t.removeNode(i),0===i.childNodes.length&&t.removeNode(i))}t.removeChromeArtifacts(o)}}.bind(this))},n.prototype.queryState=function(){try{return e.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(t){if("NS_ERROR_UNEXPECTED"==t.name)return!1;throw t}},e.commandPatches.insertOrderedList=new n("insertOrderedList"),e.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=e.node,n=new e.api.CommandPatch("outdent");n.execute=function(){e.transactionManager.run(function(){var n=new e.api.Selection,r=n.range,o=n.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});if("BLOCKQUOTE"===r.commonAncestorContainer.nodeName){n.placeMarkers(),n.selectMarkers(!0);var i=r.cloneContents();o.parentNode.insertBefore(i,o),r.deleteContents(),n.selectMarkers(),""===o.textContent&&o.parentNode.removeChild(o)}else{var a=n.getContaining(function(e){return"P"===e.nodeName});if(a){var s=t.nextSiblings(a);if(s.size){for(var u=document.createElement(o.nodeName);s.size;)u.appendChild(s.first()),s=s.shift();o.parentNode.insertBefore(u,o.nextElementSibling)}n.placeMarkers(),o.parentNode.insertBefore(a,o.nextElementSibling),n.selectMarkers(),""===o.innerHTML&&o.parentNode.removeChild(o)}else e.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},e.commandPatches.outdent=n}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=new e.api.CommandPatch("createLink");e.commandPatches.createLink=t,t.execute=function(t){var n=new e.api.Selection;if(n.range.collapsed){var r=document.createElement("a");r.setAttribute("href",t),r.textContent=t,n.range.insertNode(r);var o=document.createRange();o.setStartBefore(r),o.setEndAfter(r),n.selection.removeAllRanges(),n.selection.addRange(o)}else e.api.CommandPatch.prototype.execute.call(this,t)}}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[],o=function(){"use strict";return function(){return function(e){var t=e.node;e.allowsBlockElements()&&e.el.addEventListener("keyup",function(n){if(8===n.keyCode||46===n.keyCode){var r=new e.api.Selection,o=r.getContaining(function(e){return"P"===e.nodeName});o&&e.transactionManager.run(function(){r.placeMarkers(),t.removeChromeArtifacts(o),r.selectMarkers()},!0)}})}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(57),n(58),n(59),n(60)],o=function(e,t,n,r){"use strict";return function(o){this.CommandPatch=e(o),this.Command=t(o),this.Selection=n(o),this.SimpleCommand=r(this,o)}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(e){function t(e){this.commandName=e}return t.prototype.execute=function(t){e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},t.prototype.queryState=function(){return document.queryCommandState(this.commandName)},t.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},t}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";return function(e){function t(t){this.commandName=t,this.patch=e.commandPatches[this.commandName]}return t.prototype.execute=function(t){this.patch?this.patch.execute(t):e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},t.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},t.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},t}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";return function(e){function t(){var e=document.createElement("em");return e.style.display="none",e.classList.add("scribe-marker"),e}function n(e,t){e.insertNode(t),t.nextSibling&&i.isEmptyTextNode(t.nextSibling)&&i.removeNode(t.nextSibling),t.previousSibling&&i.isEmptyTextNode(t.previousSibling)&&i.removeNode(t.previousSibling)}function r(){if(this.selection=o.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var e=this.selection.anchorNode,t=this.selection.anchorOffset,n=this.selection.focusNode,r=this.selection.focusOffset;if(e===n&&t>r){var a=t;t=r,r=a}else if(i.isBefore(n,e)){var s=e,u=t;e=n,t=r,n=s,r=u}this.range=document.createRange(),this.range.setStart(e,t),this.range.setEnd(n,r)}}var o=e.el.ownerDocument,i=e.node;if(o.compareDocumentPosition(e.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var a=e.el.parentNode;a&&i.isFragment(a);)a=a.parentNode;a&&a.getSelection&&(o=a)}return r.prototype.getContaining=function(t){var n=this.range;if(n){var r=this.range.commonAncestorContainer;return r&&e.el===r||!t(r)?i.getAncestor(r,e.el,t):r}},r.prototype.placeMarkers=function(){var r=this.range;if(r&&document.contains(e.el)&&e.el.contains(r.startContainer)&&e.el.contains(r.endContainer)){if(n(r.cloneRange(),t()),!r.collapsed){var o=r.cloneRange();o.collapse(!1),n(o,t())}this.selection.removeAllRanges(),this.selection.addRange(r)}},r.prototype.getMarkers=function(){return e.el.querySelectorAll("em.scribe-marker")},r.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(e){var t=e.parentNode;i.removeNode(e),t.normalize()})},r.prototype.selectMarkers=function(e){var t=this.getMarkers();if(t.length){var n=document.createRange();n.setStartBefore(t[0]),n.setEndAfter(t.length>=2?t[1]:t[0]),e||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(n)}},r.prototype.isCaretOnNewLine=function(){var e=this.getContaining(function(e){return"P"===e.nodeName});return!!e&&i.isEmptyInlineElement(e)},r}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";return function(e,t){function n(e,n){t.api.Command.call(this,e),this._nodeName=n}return n.prototype=Object.create(e.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var e=new t.api.Selection;return t.api.Command.prototype.queryState.call(this)&&!!e.getContaining(function(e){return e.nodeName===this._nodeName}.bind(this))},n}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[n(62)],o=function(e){"use strict";return function(t){function n(){this.history=[]}return Object.assign(n.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(t.pushHistory(),t.trigger(e.legacyContentChanged),t.trigger(e.contentChanged))},run:function(e,n){this.start();try{e&&e()}finally{t._forceMerge=n===!0,this.end(),t._forceMerge=!1}}}),n}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){"use strict";return{contentChanged:"scribe:content-changed",legacyContentChanged:"content-changed",destroy:"scribe:destroy"}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(64),n(65),n(66),n(67),n(69),n(70),n(71)],o=function(e,t,n,r,o,i,a){"use strict";return{indent:e,insertList:t,outdent:n,redo:r,subscript:o,superscript:i,undo:a}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=new e.api.Command("indent");t.queryEnabled=function(){var t=new e.api.Selection,n=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!n},e.commands.indent=t}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[n(30)],o=function(e){"use strict";return function(){return function(t){var n=t.node,r=function(e){t.api.Command.call(this,e)};r.prototype=Object.create(t.api.Command.prototype),r.prototype.constructor=r,r.prototype.execute=function(r){function o(e){if(e.size){for(var t=document.createElement(s.nodeName);e.size;)t.appendChild(e.first()),e=e.shift();s.parentNode.insertBefore(t,s.nextElementSibling)}}if(this.queryState()){var i=new t.api.Selection,a=i.range,s=i.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName}),u=i.getContaining(function(e){return"LI"===e.nodeName});t.transactionManager.run(function(){if(u){var t=n.nextSiblings(u);o(t),i.placeMarkers();var r=document.createElement("p");r.innerHTML=u.innerHTML,s.parentNode.insertBefore(r,s.nextElementSibling),u.parentNode.removeChild(u)}else{var c=e.List(s.querySelectorAll("li")).filter(function(e){return a.intersectsNode(e)}),l=c.last(),p=n.nextSiblings(l);o(p),i.placeMarkers();var f=document.createDocumentFragment();c.forEach(function(e){var t=document.createElement("p");t.innerHTML=e.innerHTML,f.appendChild(t)}),s.parentNode.insertBefore(f,s.nextElementSibling),c.forEach(function(e){e.parentNode.removeChild(e)})}0===s.childNodes.length&&s.parentNode.removeChild(s),i.selectMarkers()}.bind(this))}else t.api.Command.prototype.execute.call(this,r)},r.prototype.queryEnabled=function(){return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()},t.commands.insertOrderedList=new r("insertOrderedList"),t.commands.insertUnorderedList=new r("insertUnorderedList")}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=new e.api.Command("outdent");t.queryEnabled=function(){var t=new e.api.Selection,n=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!n},e.commands.outdent=t}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[n(68)],o=function(e){"use strict";return function(){return function(t){var n=new t.api.Command("redo");n.execute=function(){t.undoManager.redo()},n.queryEnabled=function(){return t.undoManager.position>0},t.commands.redo=n,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){e.isRedoKeyCombination(t)&&(t.preventDefault(),n.execute())})}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";function e(e){return!e.shiftKey&&(e.metaKey||e.ctrlKey&&!e.altKey)&&90===e.keyCode}function t(e){return e.shiftKey&&(e.metaKey||e.ctrlKey&&!e.altKey)&&90===e.keyCode}return{isUndoKeyCombination:e,isRedoKeyCombination:t}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=new e.api.Command("subscript");e.commands.subscript=t}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){var t=new e.api.Command("superscript");e.commands.superscript=t}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[n(68)],o=function(e){"use strict";return function(){return function(t){var n=new t.api.Command("undo");n.execute=function(){t.undoManager.undo()},n.queryEnabled=function(){return t.undoManager.position<t.undoManager.length},t.commands.undo=n,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){e.isUndoKeyCombination(t)&&(t.preventDefault(),n.execute())})}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(30)],o=function(e){"use strict";function t(){this._listeners={}}return t.prototype.on=function(t,n){var r=this._listeners[t]||e.Set();this._listeners[t]=r.add(n)},t.prototype.off=function(t,n){var r=this._listeners[t]||e.Set();n?this._listeners[t]=r["delete"](n):this._listeners[t]=r.clear()},t.prototype.trigger=function(t,n){for(var r=t.split(":");r.length;){var o=r.join(":"),i=this._listeners[o]||e.Set();i.forEach(function(e){e.apply(null,n)}),r.splice(r.length-1,1)}},t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(30)],o=function(e){function t(t,n){const r=e.fromJS(t),o=e.fromJS(n),i=o.merge(r);return i.toJS()}function n(e){var n=e||{};return n.defaultPlugins&&(n.defaultPlugins=n.defaultPlugins.filter(i(u.defaultPlugins))),n.defaultFormatters&&(n.defaultFormatters=n.defaultFormatters.filter(i(u.defaultFormatters))),Object.freeze(t(n,u))}function r(e){return function(t,n){return t===e?-1:n===e?1:0}}function o(e){return function(t){return-1!==(e?a:s).indexOf(t)}}function i(e){return function(t){return-1!==e.indexOf(t)}}var a=["setRootPElement","enforcePElements","ensureSelectableContainers"],s=["inlineElementsMode"],u={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:a.concat(s),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:u,checkOptions:n,sortByPlugin:r,filterByBlockLevelMode:o,filterByPluginExists:i}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(75),n(76),n(77)],o=function(e,t,n){"use strict";return function(){return function(e){function r(e){var n=document.createElement("div");return n.innerHTML=e,o(n,function(e,n){var r=(e+n).split(/(<[^>]+?>(?:.*<\/[^>]+?>)?)/);return r.map(function(e){return/^</.test(e)?e:t.convert(e)}).join("").slice(e.length)}),n.innerHTML}function o(e,t){var r=n.toArray(e.children).filter(s.isBlockElement);r.length?r.forEach(function(e){o(e,t)}):i(e,t)}function i(e,t){for(var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),r=n.firstChild(),o="";r;)r.previousSibling&&"BR"===r.previousSibling.nodeName&&(o=""),r.data=t(o,r.data),o+=r.data,r=n.nextSibling()}var a,s=e.node;e.el.addEventListener("keypress",function(e){var t={34:'"',39:"'"};a=t[e.charCode]}),e.el.addEventListener("input",function(){if(a){var t=new e.api.Selection,n=e.allowsBlockElements()?t.getContaining(s.isBlockElement):e.el;t.placeMarkers(),n.innerHTML=r(n.innerHTML),t.selectMarkers(),a=void 0}}),e.registerHTMLFormatter("normalize",r)}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){return{openDoubleCurly:"“",closeDoubleCurly:"”",openSingleCurly:"‘",closeSingleCurly:"’"}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(75)],o=function(e){function t(e){return/[^\s()]/.test(e)}function n(e,n){return function(r,o){o=o||"";var i=t(o);return i?o+n:o+e}}function r(t){if(/['"]/.test(t)){var o=t.replace(/([\s\S])?'/,n(e.openSingleCurly,e.closeSingleCurly)).replace(/([\s\S])?"/,n(e.openDoubleCurly,e.closeDoubleCurly));return r(o)}return t}return{convert:r}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){var t=[];if(e&&e.length&&e.item)for(var n=0;n<e.length;n++){var r=e.item(n);r&&t.push(r)}return t}return{toArray:e}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(79),n(80),n(112)],o=function(e,t,n){"use strict";return function(r){var o=t(n(r),{tags:{em:{"class":"scribe-marker"},br:{}}});return function(t){var n=new e(o);t.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;!function(i,a){r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o))}(this,function(){function e(e){var t=e.tags,n=Object.keys(t),r=n.map(function(e){return typeof t[e]}).every(function(e){return"object"===e||"boolean"===e||"function"===e});if(!r)throw new Error("The configuration was invalid");this.config=e}function t(e){return-1!==s.indexOf(e.nodeName)}function n(e){return-1!==u.indexOf(e.nodeName)}function r(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function o(e,t,n){return"function"==typeof e.tags[t]?e.tags[t](n):e.tags[t]}function i(e,t){return"undefined"==typeof t?!0:"boolean"==typeof t?!t:!1}function a(e,t,n){var r=e.name.toLowerCase();return t===!0?!1:"function"==typeof t[r]?!t[r](e.value,n):"undefined"==typeof t[r]?!0:t[r]===!1?!0:"string"==typeof t[r]?t[r]!==e.value:!1}var s=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],u=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return e.prototype.clean=function(e){var t=document.createElement("div");return t.innerHTML=e,this._sanitize(t),t.innerHTML},e.prototype._sanitize=function(e){var s=r(e),u=s.firstChild();if(u)do if(!u._sanitized)if(u.nodeType!==Node.TEXT_NODE){if(u.nodeType===Node.COMMENT_NODE){e.removeChild(u),this._sanitize(e);break}var c,l=n(u);l&&(c=Array.prototype.some.call(u.childNodes,t));var p=!!e.parentNode,f=t(e)&&t(u)&&p,d=u.nodeName.toLowerCase(),h=o(this.config,d,u),m=l&&c;if(m||i(u,h)||!this.config.keepNestedBlockElements&&f){if("SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName)for(;u.childNodes.length>0;)e.insertBefore(u.childNodes[0],u);e.removeChild(u),this._sanitize(e);break}for(var v=0;v<u.attributes.length;v+=1){var b=u.attributes[v];a(b,h,u)&&(u.removeAttribute(b.name),v-=1)}this._sanitize(u),u._sanitized=!0}else if(""===u.data.trim()&&(u.previousElementSibling&&t(u.previousElementSibling)||u.nextElementSibling&&t(u.nextElementSibling))){e.removeChild(u),this._sanitize(e);break}while(u=s.nextSibling())},e})},function(e,t,n){var r,o;r=[n(81),n(108)],o=function(e,t){var n=t(e);return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(82),n(83),n(100),n(95),n(88),n(86),n(92),n(105)],o=function(e,t,n,r,o,i,a,s){function u(l,p,f,d,h){if(!i(l))return l;var m=o(p.length)&&(r(p)||s(p));return(m?e:t)(p,function(e,t,r){if(a(e))return d||(d=[]),h||(h=[]),n(l,r,t,u,f,d,h);var o=l[t],i=f?f(o,e,t,l,r):c,s="undefined"==typeof i;s&&(i=e),!m&&"undefined"==typeof i||!s&&(i===i?i===o:o!==o)||(l[t]=i)}),l}var c;return u}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(84),n(87)],o=function(e,t){function n(n,r){return e(n,r,t)}return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(85)],o=function(e){function t(t,n,r){for(var o=-1,i=e(t),a=r(t),s=a.length;++o<s;){var u=a[o];if(n(i[u],u,i)===!1)break}return t}return t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(86)],o=function(e){function t(t){return e(t)?t:Object(t)}return t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(88),n(89),n(86),n(93)],o=function(e,t,n,r){var o=t(o=Object.keys)&&o,i=o?function(t){if(t)var i=t.constructor,a=t.length;return"function"==typeof i&&i.prototype===t||"function"!=typeof t&&a&&e(a)?r(t):n(t)?o(t):[]}:r;return i}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return"number"==typeof e&&e>-1&&e%1==0&&t>=e}var t=Math.pow(2,53)-1;return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(90),n(92)],o=function(e,t){function n(e){return null==e?!1:s.call(e)==r?u.test(a.call(e)):t(e)&&o.test(e)||!1}var r="[object Function]",o=/^\[object .+?Constructor\]$/,i=Object.prototype,a=Function.prototype.toString,s=i.toString,u=RegExp("^"+e(s).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(91)],o=function(e){function t(t){return t=e(t),t&&r.test(t)?t.replace(n,"\\$&"):t}var n=/[.*+?^${}()|[\]\/\\]/g,r=RegExp(n.source);return t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return"string"==typeof e?e:null==e?"":e+""}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return e&&"object"==typeof e||!1}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(94),n(95),n(96),n(88),n(97),n(98)],o=function(e,t,n,r,o,i){function a(a){for(var s=o(a),c=s.length,l=c&&a.length,p=l&&r(l)&&(t(a)||i.nonEnumArgs&&e(a)),f=-1,d=[];++f<c;){var h=s[f];(p&&n(h,l)||u.call(a,h))&&d.push(h)}return d}var s=Object.prototype,u=s.hasOwnProperty;return a}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(88),n(92)],o=function(e,t){function n(n){var i=t(n)?n.length:r;return e(i)&&a.call(n)==o||!1}var r,o="[object Arguments]",i=Object.prototype,a=i.toString;return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(88),n(89),n(92)],o=function(e,t,n){var r="[object Array]",o=Object.prototype,i=o.toString,a=t(a=Array.isArray)&&a,s=a||function(t){return n(t)&&e(t.length)&&i.call(t)==r||!1};return s}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e,n){return e=+e,n=null==n?t:n,e>-1&&e%1==0&&n>e}var t=Math.pow(2,53)-1;return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(94),n(95),n(96),n(88),n(86),n(98)],o=function(e,t,n,r,o,i){function a(a){if(null==a)return[];o(a)||(a=Object(a));var s=a.length;s=s&&r(s)&&(t(a)||i.nonEnumArgs&&e(a))&&s||0;for(var c=a.constructor,l=-1,p="function"==typeof c&&c.prototype===a,f=Array(s),d=s>0;++l<s;)f[l]=l+"";for(var h in a)d&&n(h,s)||"constructor"==h&&(p||!u.call(a,h))||f.push(h);return f}var s=Object.prototype,u=s.hasOwnProperty;return a}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(89),n(99)],o=function(e,t){var n=/\bthis\b/,r=Object.prototype,o=(o=t.window)&&o.document,i=r.propertyIsEnumerable,a={};return function(r){a.funcDecomp=!e(t.WinRTError)&&n.test(function(){return this}),a.funcNames="string"==typeof Function.name;try{a.dom=11===o.createDocumentFragment().nodeType}catch(s){a.dom=!1}try{a.nonEnumArgs=!i.call(arguments,1)}catch(s){a.nonEnumArgs=!0}}(0,0),a}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;(function(e,n){r=[],o=function(){var r={"function":!0,object:!0},o=r[typeof t]&&t&&!t.nodeType&&t,i=r[typeof e]&&e&&!e.nodeType&&e,a=o&&i&&"object"==typeof n&&n,s=r[typeof window]&&window,u=a||s!==(this&&this.window)&&s||this;return u}.apply(t,r),!(void 0!==o&&(e.exports=o))}).call(t,n(12)(e),function(){return this}())},function(e,t,n){var r,o;r=[n(101),n(94),n(95),n(88),n(102),n(105),n(106)],o=function(e,t,n,r,o,i,a){function s(s,c,l,p,f,d,h){for(var m=d.length,v=c[l];m--;)if(d[m]==v)return void(s[l]=h[m]);var b=s[l],y=f?f(b,v,l,s,c):u,g="undefined"==typeof y;g&&(y=v,r(v.length)&&(n(v)||i(v))?y=n(b)?b:b?e(b):[]:o(v)||t(v)?y=t(b)?a(b):o(b)?b:{}:g=!1),d.push(v),h.push(y),g?s[l]=p(y,v,f,d,h):(y===y?y!==b:b===b)&&(s[l]=y)}var u;return s}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(89),n(103)],o=function(e,t){var n="[object Object]",r=Object.prototype,o=r.toString,i=e(i=Object.getPrototypeOf)&&i,a=i?function(r){if(!r||o.call(r)!=n)return!1;var a=r.valueOf,s=e(a)&&(s=i(a))&&i(s);return s?r==s||i(r)==s:t(r)}:t;return a}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(104),n(92)],o=function(e,t){function n(n){var o;if(!t(n)||a.call(n)!=r||!i.call(n,"constructor")&&(o=n.constructor,"function"==typeof o&&!(o instanceof o)))return!1;var s;return e(n,function(e,t){s=t}),"undefined"==typeof s||i.call(n,s)}var r="[object Object]",o=Object.prototype,i=o.hasOwnProperty,a=o.toString;return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(84),n(97)],o=function(e,t){function n(n,r){return e(n,r,t)}return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(88),n(92)],o=function(e,t){function n(n){return t(n)&&e(n.length)&&N[_.call(n)]||!1}var r="[object Arguments]",o="[object Array]",i="[object Boolean]",a="[object Date]",s="[object Error]",u="[object Function]",c="[object Map]",l="[object Number]",p="[object Object]",f="[object RegExp]",d="[object Set]",h="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",b="[object Float32Array]",y="[object Float64Array]",g="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",C="[object Uint8Array]",w="[object Uint8ClampedArray]",O="[object Uint16Array]",x="[object Uint32Array]",N={};N[b]=N[y]=N[g]=N[k]=N[E]=N[C]=N[w]=N[O]=N[x]=!0,N[r]=N[o]=N[v]=N[i]=N[a]=N[s]=N[u]=N[c]=N[l]=N[p]=N[f]=N[d]=N[h]=N[m]=!1;var j=Object.prototype,_=j.toString;return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(107),n(97)],o=function(e,t){function n(n){return e(n,t(n))}return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e,t,n){n||(n=t,t={});for(var r=-1,o=n.length;++r<o;){var i=n[r];t[i]=e[i]}return t}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(109),n(111)],o=function(e,t){function n(n){return function(){var r=arguments,o=r.length,i=r[0];if(2>o||null==i)return i;var a=r[o-2],s=r[o-1],u=r[3];o>3&&"function"==typeof a?(a=e(a,s,5),o-=2):(a=o>2&&"function"==typeof s?s:null,o-=a?1:0),u&&t(r[1],r[2],u)&&(a=3==o?null:a,o=2);for(var c=0;++c<o;){var l=r[c];l&&n(i,l,a)}return i}}return n}.apply(t,r),
!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(110)],o=function(e){function t(t,n,r){if("function"!=typeof t)return e;if("undefined"==typeof n)return t;switch(r){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,o){return t.call(n,e,r,o)};case 4:return function(e,r,o,i){return t.call(n,e,r,o,i)};case 5:return function(e,r,o,i,a){return t.call(n,e,r,o,i,a)}}return function(){return t.apply(n,arguments)}}return t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return e}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(96),n(88),n(86)],o=function(e,t,n){function r(r,o,i){if(!n(i))return!1;var a=typeof o;if("number"==a)var s=i.length,u=t(s)&&e(o,s);else u="string"==a&&o in i;if(u){var c=i[o];return r===r?r===c:c!==c}return!1}return r}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(113),n(109)],o=function(e,t){function n(n,r,o){return r="function"==typeof r&&t(r,o,1),e(n,!0,r)}return n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(101),n(82),n(107),n(83),n(117),n(114),n(118),n(95),n(86),n(87)],o=function(e,t,n,r,o,i,a,s,u,c){function l(f,d,h,m,b,y,k){var E;if(h&&(E=b?h(f,m,b):h(f)),"undefined"!=typeof E)return E;if(!u(f))return f;var C=s(f);if(C){if(E=o(f),!d)return e(f,E)}else{var w=A.call(f),O=w==v;if(w!=g&&w!=p&&(!O||b))return R[w]?i(f,w,d):b?f:{};if(E=a(O?{}:f),!d)return n(f,E,c(f))}y||(y=[]),k||(k=[]);for(var x=y.length;x--;)if(y[x]==f)return k[x];return y.push(f),k.push(E),(C?t:r)(f,function(e,t){E[t]=l(e,d,h,t,f,y,k)}),E}var p="[object Arguments]",f="[object Array]",d="[object Boolean]",h="[object Date]",m="[object Error]",v="[object Function]",b="[object Map]",y="[object Number]",g="[object Object]",k="[object RegExp]",E="[object Set]",C="[object String]",w="[object WeakMap]",O="[object ArrayBuffer]",x="[object Float32Array]",N="[object Float64Array]",j="[object Int8Array]",_="[object Int16Array]",S="[object Int32Array]",T="[object Uint8Array]",P="[object Uint8ClampedArray]",M="[object Uint16Array]",L="[object Uint32Array]",R={};R[p]=R[f]=R[O]=R[d]=R[h]=R[x]=R[N]=R[j]=R[_]=R[S]=R[y]=R[g]=R[k]=R[C]=R[T]=R[P]=R[M]=R[L]=!0,R[m]=R[v]=R[b]=R[E]=R[w]=!1;var B=Object.prototype,A=B.toString;return l}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(115)],o=function(e){function t(t,y,g){var k=t.constructor;switch(y){case s:return e(t);case n:case r:return new k(+t);case u:case c:case l:case p:case f:case d:case h:case m:case v:var E=t.buffer;return new k(g?e(E):E,t.byteOffset,t.length);case o:case a:return new k(t);case i:var C=new k(t.source,b.exec(t));C.lastIndex=t.lastIndex}return C}var n="[object Boolean]",r="[object Date]",o="[object Number]",i="[object RegExp]",a="[object String]",s="[object ArrayBuffer]",u="[object Float32Array]",c="[object Float64Array]",l="[object Int8Array]",p="[object Int16Array]",f="[object Int32Array]",d="[object Uint8Array]",h="[object Uint8ClampedArray]",m="[object Uint16Array]",v="[object Uint32Array]",b=/\w*$/;return t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n(116),n(89),n(99)],o=function(e,t,n){function r(e){return i.call(e,0)}var o=t(o=n.ArrayBuffer)&&o,i=t(i=o&&new o(0).slice)&&i,a=Math.floor,s=t(s=n.Uint8Array)&&s,u=function(){try{var e=t(e=n.Float64Array)&&e,r=new e(new o(10),0,1)&&e}catch(i){}return r}(),c=u?u.BYTES_PER_ELEMENT:0;return i||(r=o&&s?function(e){var t=e.byteLength,n=u?a(t/c):0,r=n*c,i=new o(t);if(n){var l=new u(i,0,n);l.set(new u(e,0,n))}return t!=r&&(l=new s(i,r),l.set(new s(e,r))),i}:e(null)),r}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){return function(){return e}}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var t=Object.prototype,n=t.hasOwnProperty;return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[],o=function(){function e(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}return e}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){e.registerPlainTextFormatter(function(e){return e.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";return function(){return function(e){function t(e,t){for(var n,r=e.firstChild;r;)n=r.nextSibling,t.appendChild(r),r=n}function n(e,t){if(e.hasAttributes())for(var n=0,r=e.attributes.length;r>n;n++){var o=e.attributes[n].cloneNode(!1);t.attributes.setNamedItem(o)}}function r(e,r){var o=document.createElement(r);t(e,o),n(e,o),e.parentNode.replaceChild(o,e)}function o(e){for(var t,n=e.firstElementChild;n;){t=n.nextElementSibling,o(n);var a=i[n.nodeName];a&&r(n,a),n=t}}var i={B:"strong",I:"em"};e.registerHTMLFormatter("normalize",function(e){if("string"==typeof e){var t=document.createElement("div");return t.innerHTML=e,o(t),t.innerHTML}return o(e),e})}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,o;r=[],o=function(){"use strict";return function(){function e(e){return"*"===e||"-"===e||"•"===e}var t={32:"Space",42:"*",45:"-",46:".",49:"1",8226:"•"};return function(n){function r(e){for(;e&&!n.node.isBlockElement(e);)e=e.parentNode;return e}function o(){var e=new n.api.Selection,t=e.selection.anchorNode;t.data&&(t.data=t.data.replace(/^([•*-.\d]+)/,"")),!t.data&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&t.removeChild(t.firstChild)}function i(i){var c;a=s,s=u,u=t[i.charCode];var l=new n.api.Selection,p=l.range.commonAncestorContainer,f=r(p);if(f&&"P"===f.tagName){var d=e(p.textContent[0]),h=1===l.range.endOffset;e(s)&&"Space"===u&&d&&h&&(c="insertUnorderedList");var m="1."===[p.previousSibling&&p.previousSibling.textContent,p.textContent].join("").slice(0,2);"1"===a&&"."===s&&"Space"===u&&m&&(c="insertOrderedList")}c&&(i.preventDefault(),n.transactionManager.run(function(){n.getCommand(c).execute(),o()}))}var a,s,u;n.el.addEventListener("keypress",i)}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.baseOptions={tags:{p:{},br:!1,b:{},strong:{},i:{},em:{},strike:{},ol:{},ul:{},li:{},a:{href:!0,target:!0},h2:{},h3:{},u:{}}},r=(t.baseTextOptions=Object.assign({},n,{tags:Object.assign({},n.tags,{blockquote:{}})}),t.baseInlineOptions={tags:{br:!1,b:{},strong:{},em:{},i:{},u:{},a:{href:!0,target:!0},strike:{}}},t.toolbarButtons=[{command:"bold",icon:"bold"},{command:"italic",icon:"italic"},{command:"underline",icon:"underline"},{command:"link",icon:"link"},{command:"strikeThrough",icon:"strikethrough"}],function(e){return e.indexOf("@")>=0?"mailto:"+e:0==e.indexOf("+")?"tel:"+e:0!=e.indexOf("http://")||e.indexOf("https://")?"http://"+e:e});t.linkCommand=function(){return function(e){var t=new e.api.Command("createLink");t.nodeName="A",t.execute=function(t){var n=this,o=new e.api.Selection,i=o.range,a=o.getContaining(function(e){return e.nodeName===n.nodeName});a&&(i.selectNode(a),o.selection.removeAllRanges(),o.selection.addRange(i)),t&&e.api.SimpleCommand.prototype.execute.call(this,r(t))},t.queryState=function(){var t=new e.api.Selection;return!!t.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},t.getCurrentLink=function(){var t=this,n=new e.api.Selection,r=(n.range,n.getContaining(function(e){return e.nodeName===t.nodeName}));return r?r.href:""},e.commands.setLink=t}},t.isEditorEmpty=function(e){var t=e.el.childNodes,n=t.length;if(0===n)return!0;if(1===n){var r=t[0],o=r.nodeName.toLowerCase();if("p"===o&&""===r.textContent)return!0}return!1}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={toolbar:{buttons:["bold","italic","underline","anchor","strikethrough"]},autoLink:!1,imageDragging:!1,placeholder:{text:"Write your story..."},paste:{forcePlainText:!0,cleanPastedHTML:!0,cleanReplacements:[[/<!--[^>]*-->/gi,""]],cleanAttrs:["class","dir","style","name","id"],cleanTags:["label","meta","aside","span"]},disableExtraSpaces:!1,extensions:{imageDragging:{}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(26),p=r(l),f=n(16),d=r(f),h=n(122),m=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.captureReturn=n.captureReturn.bind(n),n.splitBlock=n.splitBlock.bind(n),n}return a(t,e),s(t,[{key:"captureReturn",value:function(){this.props.addBlock(v.Name,this.props.position)}},{key:"splitBlock",value:function(e){this.props.splitBlock(this.props.position)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"katap-block katap-text",onClick:this.onFocus},c["default"].createElement(p["default"],{content:this.props.content,options:h.baseTextOptions,onFocus:this.onFocus,onContentChanged:this.onContentChanged}))}}]),t}(d["default"]),v={Name:"text",React:m,Icon:"text-height",Empty:function(){return"<p><br></p>"},maximumBlocks:0,Description:"Text",isEmpty:function(e){return""===e.replace(/(<([^>]+)>)/gi,"")}};t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(16),p=r(l),f=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return c["default"].createElement("hr",{className:"katap-block katap-hr",onClick:this.setPosition})}}]),t}(p["default"]),d={Name:"hr",React:f,Icon:"ellipsis-h",Empty:function(){return""},maximumBlocks:0,Description:"Break",isEmpty:function(e){return!0}};t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(16),p=r(l),f=n(127),d=r(f),h=n(17),m=r(h),v=n(2),b=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.handleImage=n.handleImage.bind(n),n.changeItem=n.changeItem.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.content;e&&""!==e.url||this.refs.img.focus(),this.setPosition()}},{key:"handleImage",value:function(e){var t=this,n=this.props.content;this.props.onFilesAdded(e,function(e){e&&""!==e&&(n.url=e,t.props.onContentChanged(t.props.position,n))},function(e){alert("Error while uploading files.")})}},{key:"changeItem",value:function(e,t){if(this.props.onContentChanged){var n=this.props.content;n[e]=t.target.value,this.props.onContentChanged(this.props.position,n)}}},{key:"handleKeyPress",value:function(e){if(e.which===m["default"].ENTER){if(v.UrlRegex.test(e.target.value)){var t={};t.subtext=this.props.content.subtext,t.url=e.target.value,this.props.onContentChanged&&this.props.onContentChanged(this.props.position,t)}else alert("Enter a valid URL.");v.UrlRegex.lastIndex=0}}},{key:"imageLoaded",value:function(e){0===e.target.src.indexOf("blob:")&&URL.revokeObjectURL(e.target.src)}},{key:"render",value:function(){var e=this.props.content;return c["default"].createElement("div",{className:"katap-block katap-image",onClick:this.onFocus},e&&""!==e.url?c["default"].createElement("div",null,c["default"].createElement("img",{src:e.url,onLoad:this.imageLoaded,onClick:this.onFocus}),c["default"].createElement("input",{type:"text",className:"katap-image-subtext",placeholder:"Image subtext",onFocus:this.onFocus,onChange:this.changeItem.bind(this,"subtext"),value:e.subtext}),c["default"].createElement("input",{type:"text",className:"katap-image-subtext",placeholder:"Hyperlink",onFocus:this.onFocus,onChange:this.changeItem.bind(this,"hyperlink"),value:e.hyperlink})):c["default"].createElement("div",null,c["default"].createElement("input",{ref:"img",type:"text",onFocus:this.onFocus,placeholder:"Paste URL of image and press enter",onKeyDown:this.handleKeyPress}),c["default"].createElement(d["default"],{onFocus:this.onFocus,onDrop:this.handleImage},c["default"].createElement("p",null,this.props.message))))}}]),t}(p["default"]);b.defaultProps={message:"Or Drop image here or click to add.",onFilesAdded:function(e){console.log(e)}};var y={Name:"image",React:b,Icon:"image",Empty:function(){return{url:"",subtext:"",hyperlink:""}},maximumBlocks:0,Description:"Image",isEmpty:function(e){return""===e.url}};t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(27),p=(r(l),function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={className:""},n.getClassName=n.getClassName.bind(n),n.onDragEnter=n.onDragEnter.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n.onClick=n.onClick.bind(n),n.onDrop=n.onDrop.bind(n),n}return a(t,e),s(t,[{key:"getClassName",value:function(){return"katap-droppable "+(this.props.className||this.state.className)}},{key:"onDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({className:"katap-drop-active"})}},{key:"componentDidMount",value:function(){this.refs.droppable.focus()}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.props.onDragOver&&this.props.onDragOver(e)}},{key:"onDragLeave",value:function(e){this.setState({className:""}),this.props.onDragLeave&&this.props.onDragLeave(e)}},{key:"onClick",value:function(){this.props.onFocus&&this.props.onFocus();var e=this.refs.input;e.value=null,e.click()}},{key:"onDrop",value:function(e){e.preventDefault();var t;e.dataTransfer?t=e.dataTransfer.files:e.target&&(t=e.target.files);for(var n=this.props.multiple?t.length:1,r=0;n>r;r++)t[r].preview=URL.createObjectURL(t[r]);this.props.onDrop&&(t=Array.prototype.slice.call(t,0,n),this.props.onDrop(t))}},{key:"render",value:function(){return c["default"].createElement("div",{ref:"droppable",style:{height:100},className:this.getClassName(),onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onClick:this.onClick,onDrop:this.onDrop},c["default"].createElement("input",{ref:"input",type:"file",style:{display:"none"},multiple:this.props.multiple,onChange:this.onDrop}),this.props.children)}}]),t}(c["default"].Component));p.defaultProps={supportClick:!0,multiple:!1},t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(16),p=r(l),f=n(5),d=(r(f),n(129)),h=r(d),m=n(6),v=r(m),b=n(2),y=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.addItem=n.addItem.bind(n),n.handleItemRemove=n.handleItemRemove.bind(n),n.renderListItem=n.renderListItem.bind(n),n}return a(t,e),s(t,[{key:"onContentChanged",value:function(e,t){this.props.content[e].content=t,this.props.onContentChanged&&this.props.onContentChanged(this.props.position,this.props.content)}},{key:"addItem",value:function(e){if(!(0>e||e>=this.props.content.length)){var t=this.props.content;t.push({content:"",key:(0,b.uuid)()}),this.props.onContentChanged&&this.props.onContentChanged(this.props.position,t)}}},{key:"handleItemRemove",value:function(e,t){var n=this.props.content;n.splice(t,1),this.props.onContentChanged&&this.props.onContentChanged(this.props.position,n)}},{key:"renderListItem",value:function(){var e=this,t=[];return this.props.content.map(function(n,r){t.push(c["default"].createElement("li",{key:n.key},c["default"].createElement(v["default"],{onlyRemove:!0,blockAction:e.handleItemRemove,position:r,className:"katap-list-block-control",length:e.props.content.length}),c["default"].createElement(h["default"],{position:r,content:n.content,addItem:e.addItem,onFocus:e.onFocus,onContentChanged:e.onContentChanged})))}),t}},{key:"render",value:function(){return c["default"].createElement("ol",{className:"katap-block katap-list"},this.renderListItem())}}]),t}(p["default"]),g={Name:"ol",React:y,Icon:"list-ol",Empty:function(){return[{content:"<p><br></p>",key:(0,b.uuid)()}]},maximumBlocks:0,Description:"Ordered List",isEmpty:function(e){for(var t=0;t<e.length;t++)if(""!==e[t].content.replace(/(<([^>]+)>)/gi,""))return!1;return!0}};y.defaultProps={content:g.Empty()},t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(26),p=r(l),f=n(122),d=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.captureReturn=n.captureReturn.bind(n),n.onContentChanged=n.onContentChanged.bind(n),n}return a(t,e),s(t,[{key:"captureReturn",value:function(){""!==this.props.content&&"<p><br></p>"!==this.props.content&&this.props.addItem&&this.props.addItem(this.props.position)}},{key:"onContentChanged",value:function(e){this.props.onContentChanged&&this.props.onContentChanged(this.props.position,e)}},{key:"render",value:function(){return c["default"].createElement(p["default"],{content:this.props.content,options:f.baseInlineOptions,onFocus:this.props.onFocus,captureReturn:this.captureReturn,onContentChanged:this.onContentChanged,placeholder:"Add a list item...",enterCapture:!0,inline:!0})}}]),t}(c["default"].Component);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(123),p=n(124),f=r(p),d=n(26),h=r(d),m=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.onContentChanged=n.onContentChanged.bind(n),n.onCreditChange=n.onCreditChange.bind(n),n}return a(t,e),s(t,[{key:"onContentChanged",value:function(e){var e={content:e,credit:this.props.content.credit};this.props.onContentChanged&&this.props.onContentChanged(this.props.position,e)}},{key:"onCreditChange",value:function(e){var t={content:this.props.content.content,credit:e.target.value};this.props.onContentChanged&&this.props.onContentChanged(this.props.position,t)}},{key:"render",value:function(){return c["default"].createElement("blockquote",{className:"katap-block katap-text"},c["default"].createElement(h["default"],{content:this.props.content.content,options:l.baseOptions,onFocus:this.onFocus,onContentChanged:this.onContentChanged}),c["default"].createElement("input",{className:"katap-blockquote-credit",type:"text",placeholder:"Credit",onFocus:this.onFocus,onChange:this.onCreditChange,value:this.props.content.credit}))}}]),t}(f["default"].React),v={Name:"quote",React:m,Icon:"quote-left",Empty:function(){return{content:"<p><br></p>",credit:""}},maximumBlocks:0,Description:"Block Quote",isEmpty:function(e){return""===e.content.replace(/(<([^>]+)>)/gi,"")}};m.defaultProps={content:v.Empty()},t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=n(128),p=r(l),f=n(2),d=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return c["default"].createElement("ul",{className:"katap-block katap-list"},this.renderListItem())}}]),t}(p["default"].React),h={Name:"ul",React:d,Icon:"list-ul",Empty:function(){return[{content:"<p><br></p>",key:(0,f.uuid)()}]},maximumBlocks:0,Description:"Unordered List",isEmpty:function(e){for(var t=0;t<e.length;t++)if(""!==e[t].content.replace(/(<([^>]+)>)/gi,""))return!1;return!0}};d.defaultProps={content:h.Empty()},t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=t.arrangeBlock=t.splitBlock=t.splitSingleBlock=t.removeBlock=t.addBlock=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(5),a=(r(i),n(2)),s=(t.addBlock=function(e,t,n,r,i,u){if(-1>i||i>e.length)return e;if(!n[r])return e;if(t>=0){var c=e[t];if("text"===c.type&&"text"===r)return e;if(c.type!==n.hr.Name&&n[c.type].isEmpty(c.data)){if(r===c.type)return e;e.splice(i,1),i--}if(c.type===n.text.Name&&c.data.indexOf(u)>=0){var l=s(c,u);null!==l&&!function(){e.splice(i,1);var t=i;l.forEach(function(n){e.splice(t++,0,n)})}()}}if(0!==n[r].maximumBlocks){var p=function(){var t=0;return e.forEach(function(e,n){e.type===r&&t++}),t>=n[r].maximumBlocks?{v:e}:void 0}();if("object"===("undefined"==typeof p?"undefined":o(p)))return p.v}var f={type:r,data:n[r].Empty(),key:(0,a.uuid)()};return e.splice(i+1,0,f),e},t.removeBlock=function(e,t,n,r){return e.splice(r,1)},t.splitSingleBlock=function(e,t){var n=e.data.split(t);if(n.length<=1)return null;var r=[];if(n.forEach(function(e){""!==e&&r.push(e)}),r.length<1)return null;var o=[],i=null;return r.forEach(function(e){i={type:"text",data:e,key:(0,a.uuid)()},o.push(i)}),o});t.splitBlock=function(e,t,n,r){var o=t;if(e[o].type!==n.text.Name)return e;var i=e[o];if(i.type!==Blocks.text.Name||i.data.indexOf(r)<0)return e;var a=s(i,o);if(null===a)return e;e.splice(o,1);var u=o;return a.forEach(function(t){e.splice(u++,0,t)}),e},t.arrangeBlock=function(e,t,n,r,o){},t.isEmpty=function(e,t){}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];arguments.length<=2||void 0===arguments[2]?null:arguments[2];t&&(t.call(null,e[0].preview),console.log("Success"))}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(134),n(136),n(137),n(138),n(139);for(var c=n(4),l=r(c),p=n(27),f=r(p),d=n(140),h=r(d),m=n(1),v=r(m),b=[{type:"h2",data:'<p><a href="http://lipsum.com">Lorem Ipsum</a></p>'},{type:"text",data:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi ut condimentum tortor. Aenean ornare ex non sagittis ullamcorper. Proin interdum leo porta lorem scelerisque lacinia. Nullam rhoncus ut urna a dapibus. Cras vestibulum cursus augue in ultricies. Proin vel malesuada dui. Sed et mi vel metus dictum aliquet. Nulla eleifend nunc eu diam tempor suscipit. Duis iaculis neque sit amet blandit pellentesque.</p><p>Quisque semper mi eget sapien ullamcorper volutpat. Nullam ac neque nulla. Nam dapibus felis ex, ut sagittis orci vestibulum nec. Suspendisse elementum, nulla at ultricies congue, tellus leo rhoncus risus, ac faucibus arcu neque sit amet elit. Donec sed ex lacus. Phasellus suscipit commodo tellus, sed malesuada justo ornare eu. Mauris blandit in nulla at consequat. Curabitur ut tortor faucibus, luctus augue a, ullamcorper arcu. Donec tincidunt consectetur eros, et viverra purus blandit eget. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Vestibulum nec malesuada mi. Donec vel orci non nunc maximus interdum. Maecenas molestie diam ac porta ultrices. Quisque gravida malesuada purus, in venenatis nulla commodo et.</p><p>Mauris pulvinar dignissim interdum. Praesent molestie non nisi ut imperdiet. Curabitur eget ligula vehicula, laoreet leo ac, iaculis enim. Quisque hendrerit accumsan sem et lobortis. Sed dapibus placerat nunc, a finibus velit suscipit nec. Quisque in nunc posuere, semper mauris non, molestie orci. Fusce pulvinar nisi ipsum, nec semper ante iaculis ut. Cras suscipit malesuada massa id ultrices. Vivamus in nisl a augue lobortis ultrices. Quisque iaculis tortor sit amet feugiat porttitor. Interdum et malesuada fames ac ante ipsum primis in faucibus. Sed at eros mauris. Aenean non dapibus elit. Donec posuere sem sit amet nulla porta lacinia. Fusce congue massa sit amet sagittis mattis.</p><p>Vivamus aliquet ante tortor, eget iaculis elit ultricies a. Duis elementum tincidunt risus sit amet ultrices. Maecenas rutrum consectetur turpis et suscipit. Fusce sit amet mattis dui, et rhoncus nulla. Proin eget libero lacus. Sed aliquet orci vel mi tincidunt eleifend. Etiam scelerisque efficitur enim, ac molestie libero consectetur eu. Maecenas interdum tincidunt dui in lacinia. Sed id lacus pharetra, feugiat nisi at, hendrerit nulla. Pellentesque sit amet egestas mauris.</p><p>Quisque sit amet lacinia libero. Proin odio massa, dictum in ante id, blandit pretium sem. Curabitur convallis arcu sed odio ullamcorper elementum. Sed at enim consequat, varius velit vitae, congue urna. Vestibulum elementum accumsan felis, quis scelerisque quam bibendum in. Maecenas mollis elementum tellus, vel vulputate tortor varius eu. Nam id ultrices ante, a hendrerit orci. Ut vel sapien scelerisque, convallis tortor sed, congue est. Donec metus nunc, accumsan at arcu vitae, porta consectetur odio. Aenean maximus erat non magna congue, et pretium ex dignissim. Mauris pellentesque accumsan efficitur. Nulla sit amet interdum arcu. Curabitur vel velit nulla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis lobortis dignissim commodo. Proin a sollicitudin felis, in sollicitudin enim.</p><p>Praesent quis neque leo. Nunc ut pellentesque lacus, ut vulputate turpis. Fusce nec diam est. Maecenas efficitur convallis augue viverra vestibulum. Donec eget lorem laoreet, porta tellus nec, posuere orci. Vestibulum posuere sem in sem ultricies, at accumsan nunc scelerisque. Morbi euismod, lacus eget ullamcorper finibus, ex purus molestie magna, et mollis nisl ligula eget magna.</p><p>Morbi molestie mauris ligula, eu vulputate orci ultricies sed. Integer urna sapien, tempor in magna vitae, iaculis interdum lacus. Aliquam blandit, dolor ac lacinia volutpat, massa est varius justo, nec varius nibh lectus vitae sapien. Nulla pellentesque nisl nec lacus condimentum porta. Integer sed lectus pulvinar, hendrerit lacus vel, gravida risus. Praesent suscipit ultrices neque non commodo. Mauris blandit bibendum nisi vitae ullamcorper. Cras scelerisque, magna eget tincidunt commodo, urna urna auctor libero, at vulputate massa ante vitae quam. Integer sed massa nulla. Morbi in interdum est. Fusce pharetra quam sit amet dictum auctor. Duis tristique ipsum accumsan neque congue, at fringilla ex elementum. Donec sit amet orci malesuada, semper quam id, laoreet leo. Duis commodo scelerisque efficitur.</p><p>Nunc sed suscipit quam, vel molestie magna. Cras sit amet consectetur arcu, eu ullamcorper justo. Suspendisse potenti. Integer molestie dictum laoreet. Ut mollis sit amet velit eget feugiat. Vivamus consequat eros in nunc suscipit gravida. Sed vitae tincidunt nisi, eget malesuada lorem. Morbi at eros fringilla, pulvinar mi in, laoreet quam. Duis dictum euismod eleifend. Donec ante elit, finibus at bibendum nec, lacinia ac erat. Ut mollis tellus nunc, eget malesuada ipsum sollicitudin at. Donec in elit rhoncus, laoreet risus quis, facilisis augue. Nam enim lacus, pellentesque ut vehicula ut, convallis ut neque.</p><p>Maecenas dignissim enim purus, ac eleifend metus sodales in. Aenean sollicitudin augue ligula, ut fermentum ligula mattis sit amet. Curabitur mattis leo vitae justo tincidunt, convallis lacinia nibh sagittis. Vestibulum accumsan commodo leo, ultricies tristique neque. Sed quis magna ante. Pellentesque ac sem id libero tempor hendrerit nec vitae metus. Aliquam erat volutpat. Ut hendrerit justo quis felis scelerisque posuere.</p><p>Maecenas commodo erat id odio aliquet commodo. Maecenas eget egestas sapien. Integer venenatis massa velit, et tempus eros pulvinar ac. Nunc volutpat lorem velit, nec lacinia augue consequat id. Nulla facilisi. Cras sollicitudin, elit ac semper ornare, arcu mauris dapibus neque, eu ornare dolor ante ac quam. Morbi ante sem, iaculis ut semper vel, malesuada nec velit. Vestibulum vestibulum urna nec nisl laoreet cursus. In bibendum a tellus vitae convallis. Sed convallis nisi pellentesque commodo tristique. Pellentesque finibus mattis dolor, vitae sagittis neque aliquam id. In eu enim eget diam egestas lobortis. Integer nec sapien eros. Mauris sollicitudin varius nisl, et fringilla quam blandit ac.</p>"
}],y=0;y<b.length;y++)b[y].key=v["default"].uuid();var g=v["default"].Blocks,k=v["default"].Editor,E=g.embed.EmbedTypes,C=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={blocks:b},n.toolbar=null,n.editor=null,n.toolbarNode=null,n.save=n.save.bind(n),n.getBlocks=n.getBlocks.bind(n),n.onChange=function(e){return n.setState({blocks:e})},n.handleScroll=(0,h["default"])(n.handleScroll.bind(n),20,{leading:!1,trailing:!0}),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"getBlocks",value:function(){return this.state.blocks}},{key:"save",value:function(){console.log(this.state.blocks),console.log(this.refs.kattappa.currentBlock)}},{key:"handleScroll",value:function(e){this.toolbar||(this.toolbar=this.refs.kattappa.refs.toolbar,this.toolbarNode=f["default"].findDOMNode(this.toolbar),this.editor=f["default"].findDOMNode(this),window.toolbar=this.toolbarNode);var t=this.toolbarNode.getBoundingClientRect();if(t.top-39<window.scrollY-t.height){if("0px"===this.toolbarNode.style.left)return;this.editor.style.paddingTop=t.height+"px",this.toolbarNode.style.position="fixed",this.toolbarNode.style.width=t.width+"px",this.toolbarNode.style.top="39px",this.toolbarNode.style.left=t.left+"px",this.toolbarNode.style.right="0px"}else this.editor.style.paddingTop="0px",this.toolbarNode.removeAttribute("style")}},{key:"render",value:function(){return l["default"].createElement("div",null,l["default"].createElement("button",{style:{position:"fixed",top:40,left:10},onClick:this.save},"console.log"),l["default"].createElement(k,{ref:"kattappa",blocks:this.state.blocks,onChange:this.onChange,availableBlocks:g,EmbedTypes:E,splitter:"<p><br></p>",getBlocks:this.getBlocks,onFilesAdded:s}))}}]),t}(l["default"].Component);f["default"].render(l["default"].createElement(C,null),document.getElementById("editor-content"))},function(e,t){},,134,134,134,134,function(e,t){function n(e,t,n){function r(t){var n=m,r=v;return m=v=void 0,O=t,y=e.apply(r,n)}function i(e){return O=e,g=setTimeout(l,t),x?r(e):y}function a(e){var n=e-w,r=e-O,o=t-n;return N?E(o,b-r):o}function c(e){var n=e-w,r=e-O;return!w||n>=t||0>n||N&&r>=b}function l(){var e=C();return c(e)?p(e):void(g=setTimeout(l,a(e)))}function p(e){return clearTimeout(g),g=void 0,j&&m?r(e):(m=v=void 0,y)}function f(){void 0!==g&&clearTimeout(g),w=O=0,m=v=g=void 0}function d(){return void 0===g?y:p(C())}function h(){var e=C(),n=c(e);if(m=arguments,v=this,w=e,n){if(void 0===g)return i(w);if(N)return clearTimeout(g),g=setTimeout(l,t),r(w)}return void 0===g&&(g=setTimeout(l,t)),y}var m,v,b,y,g,w=0,O=0,x=!1,N=!1,j=!0;if("function"!=typeof e)throw new TypeError(u);return t=s(t)||0,o(n)&&(x=!!n.leading,N="maxWait"in n,b=N?k(s(n.maxWait)||0,t):b,j="trailing"in n?!!n.trailing:j),h.cancel=f,h.flush=d,h}function r(e){var t=o(e)?g.call(e):"";return t==l||t==p}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function a(e){return"symbol"==typeof e||i(e)&&g.call(e)==f}function s(e){if("number"==typeof e)return e;if(a(e))return c;if(o(e)){var t=r(e.valueOf)?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=m.test(e);return n||v.test(e)?b(e.slice(2),n?2:8):h.test(e)?c:+e}var u="Expected a function",c=NaN,l="[object Function]",p="[object GeneratorFunction]",f="[object Symbol]",d=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,v=/^0o[0-7]+$/i,b=parseInt,y=Object.prototype,g=y.toString,k=Math.max,E=Math.min,C=Date.now;e.exports=n}]))});